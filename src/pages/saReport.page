<apex:page cache="false" showHeader="false" standardStylesheets="false" applyHtmlTag="false" applyBodyTag="false" docType="html-5.0" controller="saReportCtrl" action="{!addCountViewOnRedirect}">

    <apex:form id="allForm">

        <html lang="ja">

<head>

<meta charset="utf-8" />
<title>auポータル</title>

<meta name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no" />

<!-- stylesheet -->
<apex:stylesheet value="{!URLFOR($Resource.auResPortalSA,'/css/sanitize.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.auResPortalSA,'/css_sp/common.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.auResPortalSA,'/css_sp/style-report.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.auResPortalSA,'/css_sp/iphone.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.auResPortalSA,'/css/flatpickr.min.css')}" />

<!-- libraries -->
<apex:includescript value="{!URLFOR($Resource.auResPortalSA,'js_sp/jquery-3.2.1.min.js')}" />
<apex:includescript value="{!URLFOR($Resource.auResPortalSA,'js_sp/flatpickr.js')}" />
<apex:includescript value="{!URLFOR($Resource.auResPortalSA,'js_sp/ja.js')}" />
<apex:includescript value="{!URLFOR($Resource.auResPortalSA,'js_sp/script_check_ua.js')}" />
<apex:includescript value="{!URLFOR($Resource.auResPortalSA,'js_sp/script_fitting.js')}" />
<apex:includescript value="{!URLFOR($Resource.auResPortalSA,'js_sp/script_sp.js')}" />
<apex:includescript value="{!URLFOR($Resource.auResPortalSA,'js_sp/jquery_custom-dialog.js')}" />

<script>

    //Declaration de $j
    var $j = jQuery.noConflict();
    
    // Variable declaration for Back Function
    var previousReportList='';
    var previousReport='';
    
    //JavaScript for Error Message
    function jsCheckAddComment() {
        if ($j('.messageError').val().length > 0) {
            alert($j('.messageError').val());
            $j('.messageError').val("");
        } else {
            rerenderReportDetailsPanel();
        }
    }

  //JavaScript for Error Message
    function jsCheckCreateReport() {
        if ($j('.messageError').val().length > 0) {
            alert($j('.messageError').val());
            $j('.messageError').val("");
        } else {
            setView_02_01_11(true);
            if ($j('.messageSubmissionComplete').val().length > 0) {
              $j(".modal-dialog").CustomDialog();
              $j(".modal-dialog").CustomDialog("showModeless", $j('.messageSubmissionComplete').val(), 4000);
              $j('.messageSubmissionComplete').val("");
            }
        }
    }
    
    //JavaScript for Error Message
    function jsCheckSaveReport() {
        if ($j('.messageError').val().length > 0) {
            alert($j('.messageError').val());
            $j('.messageError').val("");
        } else {
            setView_02_01_11(true);
            if ($j('.messageSubmissionComplete').val().length > 0) {
              $j(".modal-dialog").CustomDialog();
              $j(".modal-dialog").CustomDialog("showModeless", $j('.messageSubmissionComplete').val(), 4000);
              $j('.messageSubmissionComplete').val("");
            }
        }
    }
    
    //JavaScript for Error Message
    function jsCheckSubmitReport() {
        if ($j('.messageError').val().length > 0) {
            alert($j('.messageError').val());
            $j('.messageError').val("");
        } else {
          if ($j('.messageSubmissionComplete').val().length > 0) {
            $j(".modal-dialog").CustomDialog();
              $j(".modal-dialog").CustomDialog("showModeless", $j('.messageSubmissionComplete').val(), 4000);
              $j('.messageSubmissionComplete').val("");
          }
            setView_02_01_06();
        }
    }

  //JavaScript for Error Message
    function jsCheckApproval() {
        if ($j('.messageError').val().length > 0) {
            alert($j('.messageError').val());
            $j('.messageError').val("");
        } else {
            setBackToListLogic();
        }
    }

  /*function setBasicListClickListener(){
    $j(".report-list-item").off("click");  
        $j(".report-list-item").on("click", function (e) {
          $j('.selectedReportName').val($j(this).attr('reportId'));
          jsSetBasicSelectedReportFromHome();
    });
  }*/
  
  function setBasicListClickListener(){
    $j(".result-item-category").off("click");  
        $j(".result-item-category").on("click", function (e) {
          $j('.selectedCategoryName').val($j(this).attr('categoryId'));
          jsSetBasicSelectedCategorySearchFromHome();
    });
  }
  
  function setBasicSearchListClickListener(){
    $j(".report-list-item").off("click");  
        $j(".report-list-item").on("click", function (e) {
          $j('.selectedReportName').val($j(this).attr('reportId'));
          jsSetBasicSelectedReportFromSearch();
    });
  }

  function setPendingListClickListener(){
    $j(".report-list-item").off("click");  
        $j(".report-list-item").on("click", function (e) {
          $j('.selectedReportName').val($j(this).attr('reportId'));
          jsSetPendingSelectedReportFromList();
    });
  }
  
  function setPendingSearchListClickListener(){
    $j(".report-list-item").off("click");  
        $j(".report-list-item").on("click", function (e) {
          $j('.selectedReportName').val($j(this).attr('reportId'));
          jsSetPendingSelectedReportFromSearch();
    });
  }

  function setListReportClickListener(){
    $j(".report-list-item").off("click");  
    $j(".report-list-item").on("click", function (e) {
      $j('.selectedReportName').val($j(this).attr('reportId'));
    });
  }


    function callAddNewAttachmentId(key) {
        if (checkFileSize()) {
          addNewAttachment();
        }
    }

    function callDeleteAttachment(key) {
        var obj = $j('.AttachmentIdInput');
        obj.val(key);
        jsAttachmentDelete();
    }

    function callPutInTopAttachment(key) {
        var obj = $j('.AttachmentIdInput');
        obj.val(key);
        jsAttachmentPutInTop();
    }


    function checkFileSize() {
        var goodSize = true;
        $j('input[type=file]').each(function()
        {          
            if(this.files.length > 0 && typeof this.files[0] !== 'undefined')
            {
                var file = this.files[0],
                    size = typeof ActiveXObject !== 'undefined' ?
                        getIEFileSize(file)
                        :
                        file.fileSize || file.size;
     
                goodSize = 65 * 1024 * 1024 > size;
                if(!goodSize) {
                    alert('ファイルは大きすぎです。65Moまでのファイルを選択してください。');
                }
     
                return goodSize;
            }
        });
        return goodSize;
    }


    
</script>

<style type="text/css">

  .reject .functions li {
    display: inline-block;
    width: 315px;
    margin-right: 35px;
    text-indent: 0px;
  }
  .reject .functions li:last-child {
    margin-right: 0;
  }
  .reject .functions li > a {
    text-indent: 0px;
  }
  
  .report-section-header li {
      width: 200px;
    }
  .report-section-header li > h2 {
    height: 100%; 
    font-size: 2.5rem; 
    font-weight: normal; 
  } 
    
    .result-item {
      border-bottom: 1px solid #b3b3b3;   
    }
    
    .result-item-container {
      padding: 0px;
    }
    
    .new::before {
      content: "NEW";
      background-color: #ff3f3f;
    }
  
    .report-detail .functions li > a {
      text-indent: 40px;
  }

  .report-search-condition-form .create-date > label {
      margin-right: 10px;
  }

  .approver-tab {
    color: black;
  }
  
  .current-approver-tab {
      color: #ed5500;
      border-bottom: 4px solid #ed5500;
    }
    
    .current-approver-tab .current {
      color: #ed5500;
    }
    
    .report-section-body .result-item .user > .name {
      width: 100%;
  }

    blockquote {
    display: block;
      -webkit-margin-start: 10px;
      -webkit-margin-end: 10px;
  }

  .report-section-header {
      margin-bottom: 0px;
  }
  
  .document-header {
      margin-bottom: 0px;
  }
  
  ul {
    padding-top: 0px;
  }
  .cheat{
    height: 91px !important;
  }
  .cheat li{
    margin-top: -38px !important;
  }
  .btnFix{
    width: 300px !important;
  }
  
  .good-list li {
      padding: 0 20px;
    }
    
    .try-list li {
      padding: 0 20px;
    }
    
  .good-list li > .name {
      width: 100%;
  }

  .try-list li > .name {
      width: 100%;
  }
  
  .roleSelectList {
    width: 210px;
      margin-bottom: 20px;
      margin-right: 10px;
  }

  .roleDiv {
    
  }
  
  .roleLabel {
    font-size: 2.8rem;
      padding-right: 90%;
      padding-bottom: 5px;
  }
  
  .categoryLabel{
    font-size: 2.8rem;
    padding-right: 15px;
  }
  
  .sortLabel{
    font-size: 2.8rem;
    padding-right: 15px;
  }
  
  .outputfield_body{
    margin-bottom: 1em !important;
    margin-top: 1em !important;
  }
  
  .outputfield_summary{
    margin-bottom: 0.5em !important;
    margin-top: 0.5em !important;
  }
  
  /* Css to trunk the text and add the '...' */
  .truncated-text {
      overflow: hidden;
      position: relative;
      font-size: 1.4em;
      /*line-height: 1.2em;*/
      /*max-height: 140px;*/
      max-height: 6em;
      text-align: justify !important;
      padding-right: 1em;
  }
  
  .truncated-text:before {
    content: '...';
      position: absolute;
      right: -0em;
      bottom: -0em;
  }
  
  .truncated-text:after {
      content: '';
      position: absolute;
      right: 0;
      width: 1em;
      height: 100%;
      margin-top: 0.2em;
      background: white;
  }

  .report-section-body li.result-item-category {
    height: auto;
  }


    .report-detail-section-footer .btn-attach > a {
        display: block;
        width: 100%;
        height: 100%;
        line-height: 100px;
        border-radius: 0;
        font-size: 3.2rem;
        font-weight: normal;
    }
    .report-detail-section-footer .btn-attach {
        width: 100%;
        height: 100px;
    }

    .attachInput {
      display: none;
    }

    .task-list-attachment {
      font-size: 3.2rem;
      padding-left: 1rem;
      background-color: #eee;
      border-bottom: 1px solid #fff;
      overflow: hidden;
    }

    .task-list-attachment .button--delete-list {
      float: right;
    }

    .isLink {
      cursor: pointer;
      cursor: hand;      
    }

    .linkPutInTop {
      float: right;
      margin-right: 1rem
    }

    .linkstyle {
      text-decoration: underline;
    }
    .linkstyle:hover {
      color: blue;
    }
    .linkstyle a:hover {
      color: blue;
    }

    .button--delete-list {
      width: 5.75rem;
      text-align: center;
      background-color: #000;
      color: #fff;
      line-height: 4.5rem;
      margin-top: -1rem;
    }
    .button--delete-list-same {
      line-height: 4.5rem;
      margin-top: -1rem;
    }

    .button--delete-list.linkstyle:hover {
      color: red;
    }
    .button--delete-list.linkstyle a:hover {
      color: red;
    }

    .report-form {
      padding-bottom: 50px;
    }
  
}
</style>

</head>

<body class="page-report">

  <!-- -------------------- -->
  <!-- Apex action function -->
  <!-- -------------------- -->
    
    <!-- Hidden PopUp Panel -->
    <c:saMainTopComp typeOfScreen="{!typeOfScreen}" />


    <!-- PopUp used when report submitted-->
    <div class="modal-dialog hide">
        <p>ダイアログメッセージ</p>
        <div class="btn-cancel">
            <a href="#">キャンセル</a>
        </div>
        <div class="btn-ok">
            <a href="#">OK</a>
        </div>
    </div>


    <!-- Main Panel -->
    <div class="document-container">

        <!-- Main apex Panel -->
        <apex:outputPanel id="main">


        <header class="document-header">
            <div class="btn-menu">
                <a href="#">ナビゲーション</a>
            </div>
        </header>
                
                    
        <div class="document-contents" style="width: 100%;">

  <apex:actionFunction name="addNewAttachment" action="{!addNewAttachment}" />

<apex:actionRegion >






  <apex:inputText id="attachmentId" styleClass="AttachmentIdInput" value="{!attachmentId}" style="display: none;" />
  <apex:actionFunction name="jsAttachmentDelete" action="{!attachmentDelete}" rerender="DraftPanelAttachments, RemandPanelAttachments" />
  <apex:actionFunction name="jsAttachmentPutInTop" action="{!attachmentPutInTop}" rerender="DraftPanelAttachments, RemandPanelAttachments" />


  <!-- For Click Listener on List -->
  <apex:actionFunction name="jsSetBasicSelectedCategorySearchFromHome" action="{!setSelectedCategory}" rerender="ReportPanel" oncomplete="setView_02_01_03();"/>
  <apex:actionFunction name="jsSetBasicSelectedReportFromSearch" action="{!setSelectedReport}" rerender="ReportDetailsPanel" oncomplete="previousReportList='Panel3';setView_02_01_04();"/>
  <apex:actionFunction name="jsSetPendingSelectedReportFromList" action="{!setSelectedUnpublishedReport}" rerender="ReportPendingPanel" oncomplete="previousReportList='Panel2-1';setView_02_01_14();"/>
  <apex:actionFunction name="jsSetPendingSelectedReportFromSearch" action="{!setSelectedUnpublishedReport}" rerender="ReportPendingPanel" oncomplete="previousReportList='Panel2-3';setView_02_01_14();"/>

  <!-- For error and OK Message --> 
  <apex:actionFunction name="jsCheckCreateValidity" action="{!createDraftReport}" rerender="messageError,messageSubmissionComplete,CreatePanel,HomePanel,ReportPanel,MyReportsPanel,MySearchResultPanel, selectedReportName" oncomplete="jsCheckCreateReport();" />
  <apex:actionFunction name="jsCheckSaveValidity" action="{!saveDraftReport}" rerender="messageError,messageSubmissionComplete,DraftPanel,RemandPanel,HomePanel,ReportPanel,MyReportsPanel,MySearchResultPanel, selectedReportName" oncomplete="jsCheckSaveReport();" />
  <apex:actionFunction name="jsCheckSaveRemandValidity" action="{!saveRemandReport}" rerender="messageError,messageSubmissionComplete,DraftPanel,RemandPanel,HomePanel,ReportPanel,MyReportsPanel,MySearchResultPanel, selectedReportName" oncomplete="jsCheckSaveReport();" />
  <apex:actionFunction name="jsCheckSubmitValidity" action="{!submission}" rerender="messageError,messageSubmissionComplete,CreatePanel,HomePanel,ReportPanel,MyReportsPanel,MySearchResultPanel,listOfSAReports" oncomplete="jsCheckSubmitReport();" />
  <apex:actionFunction name="jsCheckSubmitDraft" action="{!submitDraft}" rerender="messageError,messageSubmissionComplete,DraftPanel,HomePanel,ReportPanel,MyReportsPanel,MySearchResultPanel,listOfSAReports" oncomplete="jsCheckSubmitReport();" />
  <apex:actionFunction name="jsCheckSubmitRemand" action="{!submitRemand}" rerender="messageError,messageSubmissionComplete,RemandPanel,HomePanel,ReportPanel,MyReportsPanel,MySearchResultPanel,listOfSAReports" oncomplete="jsCheckSubmitReport();" />
  <apex:actionFunction name="jsCheckApproveValidity" action="{!approveReport}" rerender="messageError,messageSubmissionComplete,RemandPanel,HomePanel,ReportPanel,MyReportsPanel,MySearchResultPanel,listOfSAReports" oncomplete="jsCheckApproval();" />
  
  <!-- Screen Redrawn Functions -->
    <apex:actionFunction name="rerenderHomePanel" rerender="HomePanel" onComplete="setBasicListClickListener();"/>
    <apex:actionFunction name="rerenderBasicSearchPanel" rerender="BasicSearchPanel" onComplete="$j('.datetimepicker').flatpickr({'locale': 'ja','dateFormat': 'Y/m/d'});"/>
    <apex:actionFunction name="rerenderReportPanel" rerender="ReportPanel" onComplete="setBasicSearchListClickListener();"/>
  <apex:actionFunction name="rerenderReportDetailsPanel" rerender="ReportDetailsPanel"/>
    <apex:actionFunction name="rerenderManagedViewsPanel" rerender="ManagedViewsPanel"/>
    <apex:actionFunction name="rerenderGoodViewsPanel" rerender="GoodViewsPanel"/>
    <apex:actionFunction name="rerenderCreateReportPanel" rerender="CreatePanel"/>
    <apex:actionFunction name="rerenderMyReportPanel" rerender="MyReportsPanel" onComplete="setListReportClickListener();"/>    
    <apex:actionFunction name="rerenderMySearchPanel" rerender="MySearchPanel" onComplete="$j('.datetimepicker').flatpickr({'locale': 'ja','dateFormat': 'Y/m/d'});"/>
    <apex:actionFunction name="rerenderMySearchResultPanel" rerender="MySearchResultPanel" onComplete="setListReportClickListener();"/>
    <apex:actionFunction name="rerenderPendingReportPanel" rerender="PendingPanel"/>
    <apex:actionFunction name="rerenderDraftReportPanel" rerender="DraftPanel, selectedReportName"/>
    <apex:actionFunction name="forceRerenderDraftReportPanel" action="{!refreshDraftReport}" rerender="DraftPanel, selectedReportName"/>
    <apex:actionFunction name="forceRerenderRemandReportPanel" action="{!refreshDraftReport}" rerender="remandSelectCategory,remandSelectProcess,RemandPanel, selectedReportName"/>

    <apex:actionFunction name="rerenderPublishReportPanel" rerender="PublishPanel"/>
    <apex:actionFunction name="rerenderRemandReportPanel" rerender="remandSelectCategory,remandSelectProcess,RemandPanel"/>
    <apex:actionFunction name="rerenderReportPendingPanel" rerender="ReportPendingPanel"/>
    <apex:actionFunction name="rerenderReportPendingListPanel" rerender="ReportPendingListPanel" onComplete="setPendingListClickListener();"/>
    <apex:actionFunction name="rerenderReportPendingSearchPanel" rerender="ReportPendingSearchPanel" onComplete="$j('.datetimepicker').flatpickr({'locale': 'ja','dateFormat': 'Y/m/d'});"/>
    <apex:actionFunction name="rerenderReportPendingResultPanel" rerender="ReportPendingResultPanel" onComplete="setPendingSearchListClickListener();"/>
  
  <!-- Role Select List initialisation methods -->
    <apex:actionFunction name="initRole1Picklist" action="{!initRole1Picklist}" oncomplete="rerenderBasicSearchPanel();"/>
    <apex:actionFunction name="initRole2Picklist" action="{!initRole2Picklist}" oncomplete="rerenderBasicSearchPanel();"/>
    
    
  <!-- Check if required -->
  
  <!-- Called From Javascript Function -->
    <!-- Access Report List Pages -->
    <apex:actionFunction name="callInitHomePage" action="{!dummyFunction}" rerender="report-section-home" onComplete="setView_02_01_01();"/>
    <apex:actionFunction name="callGetAllMyReports" action="{!getAllMyReports}" rerender="report-section-search-my-entry" onComplete="setView_02_01_07();"/>
    <apex:actionFunction name="callGetPendingReports" action="{!getPendingReports}" rerender="report-Pending-result" onComplete="setView_02_02_01();"/>
    <apex:actionFunction name="controllerBasicSearch" rerender="researchParameters" onComplete="executeSearch();"/>
    <apex:actionFunction name="executeSearch" action="{!searchReport}" onComplete="updateBasicResultParameters();"/>
    <apex:actionFunction name="updateBasicResultParameters" onComplete="setView_02_01_03();"/>
    <apex:actionFunction name="controllerSearchMyReport" rerender="researchParameters" onComplete="executeSearchMine();"/>
    <apex:actionFunction name="executeSearchMine" action="{!searchMyReports}" oncomplete="setView_02_01_09();"/>
    <apex:actionFunction name="controllerPendingReportsSearch" rerender="researchParameters" onComplete="executePendingReportsSearch();"/>
    <apex:actionFunction name="executePendingReportsSearch" action="{!searchPendingReports}" onComplete="updatePendingResultParameters();"/>
    <apex:actionFunction name="updatePendingResultParameters" onComplete="setView_02_02_03();"/>    
    
    <!-- Reset old values for Back Function -->
    <apex:actionFunction name="latestSearchReport" action="{!latestSearchReport}" rerender="ReportPanel" onComplete="setView_02_01_03();"/>
    <apex:actionFunction name="latestSearchMyReports" action="{!latestSearchMyReports}" rerender="MySearchResultPanel" onComplete="setView_02_01_09();"/>
    <apex:actionFunction name="latestSearchPendingReports" action="{!latestSearchPendingReports}" rerender="ReportPendingResultPanel" onComplete="setView_02_02_03();"/>
    <apex:actionFunction name="returnToHome" action="{!returnToHome}"/>
    
  <!-- --------------------- -->
  <!-- ---- InputHidden ---- -->
  <!-- --------------------- -->
  
  <!-- Probably not required -->
  <!-- apex:inputHidden id="recordedPreviousReportListPanel" html-class="previousParameters" value="{!recordedPreviousReportListPanel}" /> -->
  <!-- apex:inputHidden id="createParameterTitle"     html-class="createParameters"     value="{!inputTitle}" /> -->
  <!-- apex:inputHidden id="createParameterBody"      html-class="createParameters"   value="{!inputReportBody}" /> -->
  
  <!-- Test if required -->
  <apex:inputHidden html-class="selectedReportName" value="{!selectedReportName}" />
  <apex:inputHidden html-class="selectedCategoryName" value="{!selectedCategoryName}" />

  <!-- To test -->
  
    
    <apex:inputHidden id="messageError"         html-class="messageError"       value="{!messageError}" />
    <apex:inputHidden id="messageSubmissionComplete"  html-class="messageSubmissionComplete"      value="{!messageSubmissionComplete}" />
    <apex:inputHidden id="basicSearchCategory"  html-class="selectListParameters"   value="{!basicSearchCategory}" />
    <apex:inputHidden id="basicSearchCount"   html-class="selectListParameters"   value="{!basicSearchCount}" />
    <apex:inputHidden id="basicSearchSort"    html-class="selectListParameters"   value="{!basicSearchSort}" />
    <apex:inputHidden id="mySearchCount"    html-class="selectListParameters"   value="{!mySearchCount}" />
    <apex:inputHidden id="mySearchState"    html-class="selectListParameters"   value="{!mySearchState}" />
    <apex:inputHidden id="pendingCount"     html-class="selectListParameters"   value="{!pendingCount}" />
    <apex:inputHidden id="remandCategory"     html-class="selectListParameters" value="{!remandCategory}" />
    <apex:inputHidden id="remandProcess"    html-class="selectListParameters"   value="{!remandProcess}" />










            <!-- #View 02-01-01(typ.) -->
            <section class="report-section report-section-home hide">

                <header class="report-section-header">
                    <h1>レポート</h1>
                    <ul class ="{!IF(isApprover,'','cheat')}">
                        <li class="{!IF(isApprover,'','cheat')}">
                          <h2>
                    <apex:commandLink html-class="current" value="公開レポート" action="{!dummyFunction}" rerender="listOfSAReports,HomePanel" oncomplete="setView_02_01_01();"/>
                  </h2>
                        </li>
                        <li class="{!IF(isApprover,'','cheat')}">
                          <h2>
                                <apex:commandLink value="Myレポート" action="{!getAllMyReports}" rerender="listOfSAReports,MyReportsPanel" oncomplete="setView_02_01_07();"/>
                            </h2>
                        </li>
                        <li>
              <h2>
                  <apex:commandLink value="承認待ち" rendered="{!isApprover}" styleClass="approver-tab" action="{!getPendingReports}" rerender="listOfSAReports,ReportPendingListPanel" oncomplete="setView_02_02_01();"/>
  
              </h2>
            </li>
            
                    </ul>
 
                        <div class="btn-search">
                            <apex:commandLink value="検索"
                                                action="{!initBasicSearchPages}" 
                                                reRender="BasicSearchPanel" 
                                                oncomplete="previousReportList='Panel1';setView_02_01_02();"/>
                        </div>
                </header>

                <apex:outputPanel id="HomePanel">
                    <div class="section-body report-section-body">
                            <ul>
                <apex:repeat value="{!listOfCategory}" var="category">
                                <li class="result-item-category" categoryId="{!category[1]}"><h3>{!category[1]}</h3></li>

                  <!-- Start of the new Code -->
                  <!-- apex:repeat value="{!listOfSAReports}" var="report">
                    <apex:outputPanel rendered="{!(category[0]=report.Category__c) && (!report.IsNew__c)}">
                                <li class="result-item report-list-item" reportId="{!report.Name}">
                                  <h4 class="title">{!report.Subject__c}</h4>
                                          <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                            <apex:param value="{!report.CreatedDate__c+offset}"/>
                        </apex:outputText>
                                          <div class="user">
                                              <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                          </div>
                                          <div class="text truncated-text outputfield_summary">
                                          <apex:outputfield value="{!report.Report_body__c}"/>
                                      </div>
                                          <ul class="engagement">
                                    <li class="good"><span class="label">いいね！</span><span class="value">{!report.NbLike__c}</span></li>
                                    <li class="view"><span class="label">閲覧</span><span class="value">{!report.NbView__c}</span></li>
                                    <li class="try"><span class="label">マネした数</span><span class="value">{!report.NbCopy__c}</span></li>
                                </ul>
                                      </li>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!(category[0]=report.Category__c) && (!!report.IsNew__c)}">
                                <li class="result-item report-list-item" reportId="{!report.Name}">
                                  <h4 class="title">{!report.Subject__c}</h4>
                                          <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                            <apex:param value="{!report.CreatedDate__c+offset}"/>
                        </apex:outputText>
                                          <div class="user">
                                              <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                          </div>
                                          <div class="text truncated-text outputfield_summary">
                                          <apex:outputfield value="{!report.Report_body__c}"/>
                                      </div>
                                          <ul class="engagement">
                                    <li class="good"><span class="label">いいね！</span><span class="value">{!report.NbLike__c}</span></li>
                                    <li class="view"><span class="label">閲覧</span><span class="value">{!report.NbView__c}</span></li>
                                    <li class="try"><span class="label">マネした数</span><span class="value">{!report.NbCopy__c}</span></li>
                                </ul>
                                      </li>
                                    </apex:outputPanel>
                                </apex:repeat-->
                                
                </apex:repeat>
                            </ul>
                    </div>
    
                        <div class="float-functions">
                        <apex:commandLink value="新規作成" styleClass="btn-create ui-color-1"
                                                    action="{!initCreatePage}" 
                                                    reRender="report-create-standard-entry,CreatePanel" 
                                                    oncomplete="previousReportList='Panel1';setView_02_01_05();"/>
                        </div>
                </apex:outputPanel>

                                
                <footer class="report-section-footer"></footer>
            </section>

            <!-- #View 02-01-02(typ.) -->
            <section class="report-section report-section-search-all-entry hide">
            
                <header class="report-section-header">
                    <h1>レポート</h1>
                    <ul class="{!IF(isApprover,'','cheat')}">
                        <li class="{!IF(isApprover,'','cheat')}">
                            <h2>
                              <apex:commandLink html-class="current" value="公開レポート" action="{!dummyFunction}" rerender="listOfSAReports,HomePanel" oncomplete="setView_02_01_01();"/>
                            </h2>
                        </li>
                        <li class="{!IF(isApprover,'','cheat')}">
                            <h2>
                                <apex:commandLink value="Myレポート" action="{!getAllMyReports}" rerender="listOfSAReports,MyReportsPanel" oncomplete="setView_02_01_07();"/>
                            </h2>
                        </li>
                        <li>
                          <h2>
                            <apex:outputPanel rendered="{!isApprover}">
                  <apex:commandLink value="承認待ち" styleClass="approver-tab" action="{!getPendingReports}" rerender="listOfSAReports,ReportPendingListPanel" oncomplete="setView_02_02_01();"/>
                </apex:outputPanel>
                            </h2>
                        </li>
                    </ul>
                    
                    <div class="btn-search">
                        <a href="#" class="ui-color-dark" onClick="setBackToListLogic();">戻る</a>
                    </div>
                </header>

                <apex:outputPanel id="BasicSearchPanel">

                    <div class="report-search-condition-form">
    
                        <form>
                            
                            <label class="keyword">
                                <apex:inputText value="{!basicSearchKeywords}" html-placeholder="キーワード検索"/>
                            </label>
                            <div class="create-date">
                                <label>投稿日</label>
                                <apex:inputText value="{!basicSearchDateStart}" styleclass="begin datetimepicker" />
                                <span class="divider">～</span>
                                <apex:inputText value="{!basicSearchDateEnd}" styleclass="end datetimepicker" />
                            </div>
                            <div class="category">
                              <label class="categoryLabel">カテゴリ</label>
                                    <apex:selectList id="basicSearchSelectCategory" value="{!basicSearchCategory}" size="1">
                                      <apex:selectOptions value="{!categoryDataOptions}"/>
                                    </apex:selectList>
                            </div> 
                            <div class="roleDiv">
                              <label class="roleLabel">組織</label>
                              <label>
                                    <apex:selectList id="basicSearchSelectRole1" onChange="initRole1Picklist();" styleClass="roleSelectList" value="{!basicSearchRole1}" size="1">
                                      <apex:selectOptions value="{!roleLevel1DataOptions}"/>
                                    </apex:selectList>
                              </label>
                              <label>
                                    <apex:selectList id="basicSearchSelectRole2" onChange="initRole2Picklist();" styleClass="roleSelectList" value="{!basicSearchRole2}" size="1">
                                      <apex:selectOptions value="{!roleLevel2DataOptions}"/>
                                    </apex:selectList>
                              </label>
                              <label>
                                    <apex:selectList id="basicSearchSelectRole3" styleClass="roleSelectList" value="{!basicSearchRole3}" size="1">
                                      <apex:selectOptions value="{!roleLevel3DataOptions}"/>
                                    </apex:selectList>
                              </label>
                            </div>
                            <div class="sort">
                              <label class="sortLabel">ソート順</label>
                                  <apex:selectList id="basicSearchSelectSort" value="{!basicSearchSort}" size="1">
                                    <apex:selectOptions value="{!sortDataOptions}"/>
                                  </apex:selectList>
                            </div>
                            <div class="count">
                                <label>表示件数</label>
                                  <apex:selectList id="basicSearchSelectCount" value="{!basicSearchCount}" size="1">
                                    <apex:selectOptions value="{!countDataOptions}"/>
                                  </apex:selectList>
                            </div>
                                <div class="btn btn-search">
                                    <a href="#" class="btn-search ui-color-1" onClick="executeSearchReportQuery();" rerender="ReportPanel">検索</a>
                                 </div>
    
                        </form>
    
                    </div>

                </apex:outputPanel>

                <footer class="report-section-footer"></footer>
            </section>

            <!-- #View 02-01-03(typ.) -->
            <div class="test-rerenderer">
            
            <section class="report-section report-section-search-all-result hide">
                <header class="report-section-header">
                    <h1>レポート</h1>
                    <ul class="{!IF(isApprover,'','cheat')}">
                        <li class="{!IF(isApprover,'','cheat')}">
                            <h2>
                              <apex:commandLink html-class="current" value="公開レポート" action="{!dummyFunction}" rerender="listOfSAReports,HomePanel" oncomplete="setView_02_01_01();"/>
                            </h2>
                        </li>
                        <li class="{!IF(isApprover,'','cheat')}">
                            <h2>
                                <apex:commandLink value="Myレポート" action="{!getAllMyReports}" rerender="listOfSAReports,MyReportsPanel" oncomplete="setView_02_01_07();"/>
                            </h2>
                        </li>
                        <li>
                          <h2>
                            <apex:outputPanel rendered="{!isApprover}">
                  <apex:commandLink value="承認待ち" styleClass="approver-tab" action="{!getPendingReports}" rerender="listOfSAReports,ReportPendingListPanel" oncomplete="setView_02_02_01();"/>
                </apex:outputPanel>
                          </h2>
                        </li>
                    </ul>
                        <div class="btn-search">
                            <apex:commandLink value="検索" 
                                                action="{!initBasicSearchPages}" 
                                                reRender="BasicSearchPanel" 
                                                oncomplete="previousReportList='Panel3';setView_02_01_02();"/>
                        </div>
                </header>

                <apex:outputPanel id="ReportPanel">

                <div class="section-body report-section-body">

                    <div class="report-search-condition">
                        <ul>
                            <li><span class="label">カテゴリ</span><span class="value">{!searchCategoryLabel}</span></li>
                            <li><span class="label">キーワード</span><span class="value">{!latestBasicSearchKeywords}</span></li>
                            <li><span class="label">投稿日</span><span class="value">{!latestBasicSearchDateStart}～ {!latestBasicSearchDateEnd}</span></li>
                            <li><span class="label">表示件数</span><span class="value">{!searchCountLabel}</span></li>
                        </ul>
                        <div class="btn btn-clear">
                            <a href="#" class="ui-color-1">
                                <apex:outputPanel >
                                    <apex:actionSupport event="onclick" action="{!dummyFunction}" rerender="HomePanel" oncomplete="setView_02_01_01();">
                                         検索クリア
                                    </apex:actionSupport>
                                </apex:outputPanel>
                            </a>
                        </div>
                    </div>

                    <ul class="result-item-container">
                        <!-- #DynamicItem -->

                        <apex:repeat value="{!listOfSAReports}" var="report" >

                            <!-- Without New Tag -->
                            <apex:outputPanel layout="none" rendered="{!(!report.IsNew__c)}">
                                <li class="result-item report-list-item" reportId="{!report.Name}">
                                  <div class="category-tag">{!report.Category__c}</div>
                                  <h4 class="title">{!report.Subject__c}</h4> 
                                    <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                      <apex:param value="{!report.CreatedDate__c+offset}"/>
                                  </apex:outputText>
                                  <div class="user">
                                        <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                  </div>
                                    <div class="text outputfield_summary">
                                    <apex:outputfield value="{!report.Report_body__c}"/>
                                </div>
                                </li>
                            </apex:outputPanel>
                            <!-- With New Tag -->
                            <apex:outputPanel layout="none" rendered="{!(report.IsNew__c)}">
                                <li class="result-item new report-list-item" reportId="{!report.Name}">
                                <div class="category-tag">{!report.Category__c}</div>
                                    <h4 class="title">{!report.Subject__c}</h4> 
                                    <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                        <apex:param value="{!report.CreatedDate__c+offset}"/>
                                </apex:outputText>
                                    <div class="user">
                                        <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                    </div>
                                    <div class="text outputfield_summary">
                                    <apex:outputfield value="{!report.Report_body__c}"/>
                                </div>
                                </li>
                            </apex:outputPanel>
                                
                        </apex:repeat>

                    </ul>

                </div>

                </apex:outputPanel>

                <div class="float-functions">
                        <apex:commandLink value="新規作成" styleClass="btn-create ui-color-1"
                            action="{!initCreatePage}" 
                            reRender="report-create-standard-entry,CreatePanel" 
                            oncomplete="previousReportList='Panel3';setView_02_01_05();"/>
                </div>
                <footer class="report-section-footer"></footer>
            </section>

            </div>
            
            <!-- #View 02-01-04(typ.) -->
            <section class="report-detail-section report-detail-standard-report hide">

                <header class="report-detail-section-header">
                    <h1>レポート詳細</h1>
                    <div class="btn-back">
                      <a href="#" class="ui-color-dark" onClick="setBackToListLogic();">戻る</a>
                    </div>
                </header>

                <apex:outputPanel id="ReportDetailsPanel">


                    <div class="section-body report-detail-section-body">
    
            <apex:pageblock >
                <!-- div Style="padding-bottom: 0.5em;">
                  <span>URL of report for Sharing : </span>
                </div-->
                <div style="padding-bottom:3em; padding-top:1em;">
                  <div style="float:right;">
                  <textarea id="copytext" rows="1" style="display:none;">{!URLBaseForSharing}{!selectedReport.Id}</textarea> 
                      <apex:commandbutton onClick="copyToClipboard(copytext);" value="URLをコピー" rerender="ReportDetailsPanel" styleclass="ui-color-1" style="font-size: 3em;border:none;"/>
                </div>
              </div>
            </apex:pageblock> 
               
                        <!-- #DynamicItem -->
    
                        <apex:outputPanel rendered="{!!selectedReport.IsNew__c}" style="padding-top:1em;">
                            <div class="report-detail">
                                <h3 class="title">{!selectedReport.Subject__c}</h3>
                                <div class="attributes">
                                    <div class="category">{!selectedReport.Category__c}</div>
                                    <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                    <apex:param value="{!selectedReport.CreatedDate__c+offset}"/>
                                  </apex:outputText>
                                    <div class="process">{!selectedReport.Process__c}</div>
                                    <div class="view">
                                        <span class="label">閲覧</span><span class="value">{!selectedReport.NbView__c}</span>
                                    </div>
                                </div>
                                <div class="text outputfield_body">
                                  <apex:outputfield value="{!selectedReport.Report_body__c}"/>
                                </div>

                                <apex:outputPanel >
                                  <p class="text">
                                    <apex:repeat value="{!lsAttachments}" var="att" >
                                      <ul class="task-list-attachment">
                                        <li>
                                          <table style="width: 100%;"><tr><td style="width: 4.7rem; vertical-align: top;">
                                          <apex:outputLink value="{!URLFOR($Action.Attachment.Download, att.Id)}" target="_blank" styleclass="isLink linkstyle">表示</apex:outputLink>
                                        </td><td style="vertical-align: top; word-break: break-all;">
                                        {!att.Name}
                                        </td></tr></table>
                                        </li>
                                      </ul>
                                    </apex:repeat>
                                  </p>
                                </apex:outputPanel>

                                <div class="user">
                                    <span class="name">{!selectedReport.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                </div>
                                <ul class="engagement">
                                    <li class="good">
                                      <span class="label">
                                        <a href="#" onClick="previousReport='Panel4';setView_02_01_04_02();">
                                        いいね！超いいね！
                                      </a>
                                      </span>
                                        <span class="value">{!selectedReport.NbLike__c}</span>
                                    </li>
                                    <li class="try">
                                        <span class="label">
                                        <a href="#" onClick="previousReport='Panel4';setView_02_01_04_01();"> 
                                          マネした数
                                    </a>
                                      </span>
                                        <span class="value">{!selectedReport.NbCopy__c}</span>
                                    </li>
                                </ul>
                                <ul class="functions">
                                    <apex:outputPanel rendered="{!isGoodSelected}">
                                        <li class="btn btn-good">
                                            <apex:actionSupport event="onclick" action="{!addRemoveView}" rerender="ReportDetailsPanel" oncomplete="rerenderReportDetailsPanel();"> 
                                                <apex:param name="selectedGoodView" value="LIKE" assignTo="{!selectedView}"/> 
                                            </apex:actionSupport>
                                            <a href="#" class="ui-color-1">いいね！</a>
                                        </li>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!!isGoodSelected}">
                                        <li class="btn btn-good">
                                            <apex:actionSupport event="onclick" action="{!addRemoveView}" rerender="ReportDetailsPanel" oncomplete="rerenderReportDetailsPanel();"> 
                                                <apex:param name="selectedGoodView" value="LIKE" assignTo="{!selectedView}"/> 
                                            </apex:actionSupport>
                                            <a href="#" class="ui-color-1-inv">いいね！</a>
                                        </li>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!isVeryGoodSelected}">
                                        <li class="btn btn-very-good">
                                            <apex:actionSupport event="onclick" action="{!addRemoveView}" rerender="ReportDetailsPanel" oncomplete="rerenderReportDetailsPanel();"> 
                                                <apex:param name="selectedVeryGoodView" value="VERY_LIKE" assignTo="{!selectedView}"/> 
                                            </apex:actionSupport>
                                            <a href="#" class="ui-color-1">超いいね！</a>
                                        </li>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!!isVeryGoodSelected}">
                                        <li class="btn btn-very-good">
                                            <apex:actionSupport event="onclick" action="{!addRemoveView}" rerender="ReportDetailsPanel" oncomplete="rerenderReportDetailsPanel();"> 
                                                <apex:param name="selectedVeryGoodView" value="VERY_LIKE" assignTo="{!selectedView}"/> 
                                            </apex:actionSupport>
                                            <a href="#" class="ui-color-1-inv">超いいね！</a>
                                        </li>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!isCopySelected}">
                                        <li class="btn btn-try">
                                            <apex:actionSupport event="onclick" action="{!addRemoveView}" rerender="ReportDetailsPanel" oncomplete="rerenderReportDetailsPanel();"> 
                                                <apex:param name="selectedCopyView" value="COPY" assignTo="{!selectedView}"/> 
                                            </apex:actionSupport>
                                            <a href="#" class="ui-color-1">マネした</a>
                                        </li>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!!isCopySelected}">
                                        <li class="btn btn-try">
                                            <apex:actionSupport event="onclick" action="{!addRemoveView}" rerender="ReportDetailsPanel" oncomplete="rerenderReportDetailsPanel();"> 
                                                <apex:param name="selectedCopyView" value="COPY" assignTo="{!selectedView}"/> 
                                            </apex:actionSupport>
                                            <a href="#" class="ui-color-1-inv">マネした</a>
                                        </li>
                                    </apex:outputPanel>
                                </ul>
                            </div>
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!selectedReport.IsNew__c}">
                            <div class="report-detail new">
                                <h3 class="title">{!selectedReport.Subject__c}</h3>
                                <div class="attributes">
                                    <div class="category">{!selectedReport.Category__c}</div>
                                    <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                    <apex:param value="{!selectedReport.CreatedDate__c+offset}"/>
                                </apex:outputText>
                                    <div class="process">{!selectedReport.Process__c}</div>
                                    <div class="view">
                                        <span class="label">閲覧</span><span class="value">{!selectedReport.NbView__c}</span>
                                    </div>
                                </div>
                                <div class="text outputfield_body">
                                  <apex:outputfield value="{!selectedReport.Report_body__c}"/>
                                </div>

                                <apex:outputPanel >
                                  <p class="text">
                                    <apex:repeat value="{!lsAttachments}" var="att" >
                                      <ul class="task-list-attachment">
                                        <li>
                                          <table style="width: 100%;"><tr><td style="width: 4.7rem; vertical-align: top;">
                                          <apex:outputLink value="{!URLFOR($Action.Attachment.Download, att.Id)}" target="_blank" styleclass="isLink linkstyle">表示</apex:outputLink>
                                        </td><td style="vertical-align: top; word-break: break-all;">
                                        {!att.Name}
                                        </td></tr></table>
                                        </li>
                                      </ul>
                                    </apex:repeat>
                                  </p>
                                </apex:outputPanel>

                                <div class="user">
                                    <span class="name">{!selectedReport.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                </div>
                                <ul class="engagement">
                                    <li class="good">
                                      <span class="label">
                                        <a href="#" onClick="previousReport='Panel4';setView_02_01_04_02();">
                                        いいね！超いいね！
                                      </a>
                                      </span>
                                        <span class="value">{!selectedReport.NbLike__c}</span>
                                    </li>
                                    <li class="try">
                                        <span class="label">
                                        <a href="#" onClick="previousReport='Panel4';setView_02_01_04_01();"> 
                                          マネした数
                                    </a>
                                      </span>
                                        <span class="value">{!selectedReport.NbCopy__c}</span>
                                    </li>
                                </ul>
                                <ul class="functions">
                                    <apex:outputPanel rendered="{!isGoodSelected}">
                                        <li class="btn btn-good">
                                            <apex:actionSupport event="onclick" action="{!addRemoveView}" rerender="selectedGoodView,ReportDetailsPanel" oncomplete="rerenderReportDetailsPanel();"> 
                                                <apex:param name="selectedGoodView" value="LIKE" assignTo="{!selectedView}"/> 
                                            </apex:actionSupport>
                                            <a href="#" class="ui-color-1">いいね！</a>
                                        </li>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!!isGoodSelected}">
                                        <li class="btn btn-good">
                                            <apex:actionSupport event="onclick" action="{!addRemoveView}" rerender="selectedGoodView,ReportDetailsPanel" oncomplete="rerenderReportDetailsPanel();"> 
                                                <apex:param name="selectedGoodView" value="LIKE" assignTo="{!selectedView}"/> 
                                            </apex:actionSupport>
                                            <a href="#" class="ui-color-1-inv">いいね！</a>
                                        </li>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!isVeryGoodSelected}">
                                        <li class="btn btn-very-good">
                                            <apex:actionSupport event="onclick" action="{!addRemoveView}" rerender="selectedVeryGoodView,ReportDetailsPanel" oncomplete="rerenderReportDetailsPanel();"> 
                                                <apex:param name="selectedVeryGoodView" value="VERY_LIKE" assignTo="{!selectedView}"/> 
                                            </apex:actionSupport>
                                            <a href="#" class="ui-color-1">超いいね！</a>
                                        </li>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!!isVeryGoodSelected}">
                                        <li class="btn btn-very-good">
                                            <apex:actionSupport event="onclick" action="{!addRemoveView}" rerender="selectedVeryGoodView,ReportDetailsPanel" oncomplete="rerenderReportDetailsPanel();"> 
                                                <apex:param name="selectedVeryGoodView" value="VERY_LIKE" assignTo="{!selectedView}"/> 
                                            </apex:actionSupport>
                                            <a href="#" class="ui-color-1-inv">超いいね！</a>
                                        </li>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!isCopySelected}">
                                        <li class="btn btn-try">
                                            <apex:actionSupport event="onclick" action="{!addRemoveView}" rerender="selectedCopyView,ReportDetailsPanel" oncomplete="rerenderReportDetailsPanel();"> 
                                                <apex:param name="selectedCopyView" value="COPY" assignTo="{!selectedView}"/> 
                                            </apex:actionSupport>
                                            <a href="#" class="ui-color-1">マネした</a>
                                        </li>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!!isCopySelected}">
                                        <li class="btn btn-try">
                                            <apex:actionSupport event="onclick" action="{!addRemoveView}" rerender="selectedCopyView,ReportDetailsPanel" oncomplete="rerenderReportDetailsPanel();"> 
                                                <apex:param name="selectedCopyView" value="COPY" assignTo="{!selectedView}"/> 
                                            </apex:actionSupport>
                                            <a href="#" class="ui-color-1-inv">マネした</a>
                                        </li>
                                    </apex:outputPanel>
                                </ul>
                            </div>
                        </apex:outputPanel>

              
                        <div class="post-comment">
                            <form>
                                  <apex:inputTextarea style="height: 7em !important;" value="{!newCommentValue1}" rows="5"/>
                                  <apex:outputPanel >
                                      <div class="btn btn-post">
                                          <apex:commandLink value="投稿" 
                                                            styleclass="ui-color-1"
                                                            action="{!dummyFunction}"
                                                            rerender="messageError,ReportDetailsPanel"
                                                            onComplete="jsCheckBodyValidity1();"/>
                                      </div>
                                  </apex:outputPanel>
                                  <apex:actionFunction name="jsCheckBodyValidity1"
                                      action="{!createNewComment1}"
                                      rerender="messageError,ReportDetailsPanel"
                                      oncomplete="jsCheckAddComment();rerenderReportDetailsPanel();" />
                            </form>
                        </div>
    
                        <ul class="comments">
    
                <!-- <li class="view" style="margin-bottom: 0.5em">
                              <span class="label" style="font-size: 2.4rem;">コメント : </span><span class="value" style="font-size: 2.4rem;">{!selectedReport.NbComment__c}</span>
                          </li> -->
                            <!-- #DynamicItem -->
                            <apex:repeat value="{!reportComments}" var="rComment">
                                <li class="comment">
                                    <span class="name">{!rComment.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                    <span class="text">{!rComment.Comment__c}</span> 
                                    <time>
                                      <apex:outputText value="{0,date,yyyy/MM/dd}">
                                      <apex:param value="{!rComment.CreatedDate__c}"/>
                                    </apex:outputText>
                                  </time>
                                </li>
                            </apex:repeat>
                        
                        </ul>
    
                    </div>
                </apex:outputPanel>

                <footer class="report-detail-section-footer"></footer>
            </section>

            <!-- #View 02-01-04-01(typ.) -->
            <section class="report-try-list-section hide">
                <header class="report-try-list-section-header">
                    <h1>マネした人</h1>
                    <div class="btn-back">
                      <a href="#" class="ui-color-dark" onClick="setBackToReportLogic();">戻る</a>
                    </div>
                </header>

                <apex:outputPanel id="ManagedViewsPanel">
                    <div class="section-body report-try-list-section-body">
    
                        <!-- #DynamicItem -->
                        <ul class="try-list">
                            <apex:repeat value="{!reportManagedViews}" var="view" >
                                <li>
                                    <span class="name">{!view.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                </li>
                            </apex:repeat>
                        </ul>
    
                    </div>
                </apex:outputPanel>

                <footer class="report-try-list-section-footer"></footer>
            </section>

            <!-- #View 02-01-04-02(typ.) -->
            <section class="report-good-list-section hide">
                <header class="report-good-list-section-header">
                    <h1>いいね！超いいね！した人</h1>
                    <div class="btn-back">
                        <a href="#" class="ui-color-dark" onClick="setBackToReportLogic();">戻る</a>
                    </div>
                </header>

                <apex:outputPanel id="GoodViewsPanel">
                    <div class="section-body report-good-list-section-body">
    
                        <ul class="good-list">
                            <apex:repeat value="{!reportGoodViews}" var="view" >
                                <apex:outputPanel rendered="{!IF(view.Type__c='LIKE',true,false)}">
                                    <li class="good">
                                        <span class="name">{!view.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                    </li>
                                </apex:outputPanel>
                                <apex:outputPanel rendered="{!IF(view.Type__c='VERY_LIKE',true,false)}">
                                    <li class="very-good">
                                        <span class="name">{!view.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                    </li>
                                </apex:outputPanel> 
                            </apex:repeat>
                        </ul>
    
                    </div>
                </apex:outputPanel>

                <footer class="report-good-list-section-footer"></footer>
            </section>

            <!-- #View 02-01-05(typ.) -->
            <section class="report-create-section report-create-standard-entry hide">
                <header class="report-create-section-header">
                    <h1>レポート新規作成</h1>
                    <div class="btn-back">
                        <a href="#" class="ui-color-dark" onClick="setBackToListLogic();">戻る</a>
                    </div>
                </header>

                <apex:outputPanel id="CreatePanel">
                <div class="section-body report-create-section-body">

                    <div class="report-form">

                        <form>

                            <label class="title">
                                <apex:inputText value="{!createSubject}" styleClass="title" html-placeholder="件名"/>
                            </label>

                            <div class="category">
                                <label>カテゴリ</label>
                                  <apex:selectList id="createReportSelectCategory" value="{!createCategory}" size="1">
                                    <apex:selectOptions value="{!categoryDataOptions}"/>
                                  </apex:selectList>
                            </div>

                            <div class="process">
                                <label>プロセス</label>
                                  <apex:selectList id="createReportSelectProcess" value="{!createProcess}" size="1">
                                    <apex:selectOptions value="{!processDataOptions}"/>
                                  </apex:selectList>
                             </div>
                            
                            <div class="report-text">
                                <apex:inputTextarea style="height: 14em !important;" value="{!createBody}" html-placeholder="レポート内容"/>
                            </div>

                            <ul class="functions">
                                <li class="btn btn-save">
                                  <apex:commandLink value="一時保存"
                                                        html-class="ui-color-1"
                                                        action="{!dummyFunction}"
                                                        rerender="messageError"
                                                        oncomplete="jsCheckCreateValidity();"/> 
                                </li>
                                <li class="btn btn-request">
                                    <apex:commandLink value="投稿承認申請"
                                                  html-class="ui-color-1"
                                                  action="{!dummyFunction}"
                                                    rerender="messageError"
                                                  oncomplete="jsCheckSubmitValidity();"/> 
                                </li>
                            </ul>

                        </form>

                    </div>

                </div>
                </apex:outputPanel>

                <footer class="report-create-section-footer"></footer>
            </section>

            <!-- #View 02-01-06(typ.) Was not necessary. -->

            <!-- #View 02-01-07(typ.) -->
            <section class="report-section report-section-my-reports hide">
                <header class="report-section-header">
                    <h1>レポート</h1>
                    <ul class="{!IF(isApprover,'','cheat')}">
                        <li class="{!IF(isApprover,'','cheat')}">
                            <h2>
                                <apex:commandLink value="公開レポート" action="{!dummyFunction}" rerender="listOfSAReports,HomePanel" oncomplete="setView_02_01_01();"/>
                            </h2>
                        </li>
                        <li class="{!IF(isApprover,'','cheat')}">
                            <h2>
                                <apex:commandLink html-class="current" value="Myレポート" action="{!getAllMyReports}" rerender="listOfSAReports,MyReportsPanel" oncomplete="setView_02_01_07();"/>
                            </h2>
                        </li>
                        <li>
                          <h2>
                            <apex:outputPanel rendered="{!isApprover}">
                              <apex:commandLink value="承認待ち" styleClass="approver-tab" action="{!getPendingReports}" rerender="listOfSAReports,ReportPendingListPanel" oncomplete="setView_02_02_01();"/>
                            </apex:outputPanel>
                          </h2>
                        </li>
                    </ul>
                        <div class="btn-search">
                            <apex:commandLink value="検索" 
                                                action="{!initMySearchPages}" 
                                                reRender="MySearchPanel" 
                                                oncomplete="previousReportList='Panel7';setView_02_01_08();"/>
                        </div>
                </header>

                <apex:outputPanel id="MyReportsPanel">

                <div class="section-body report-section-body">

                    <ul>
                        <!-- #DynamicItem -->

                        <apex:repeat value="{!listOfSAReports}" var="report" >

                            <!-- Draft -->
                            <apex:outputPanel layout="none" rendered="{!(report.State__c=typeDraft)}">
                                <li class="result-item draft report-list-item" reportId="{!report.Name}">

                                    <apex:outputPanel >
                                        <apex:actionSupport event="onclick" action="{!setSelectedUnpublishedReport}" rerender="clickedReport,DraftPanel" oncomplete="previousReportList='Panel7';setView_02_01_11(false);"> 
                                            <apex:param name="clickedReport" value="{!report.Name}" assignTo="{!selectedReportName}"/>
                                            <div class="category-tag">{!report.Category__c}</div>
                                            <h4 class="title">{!report.Subject__c}</h4>
                                            <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                        <apex:param value="{!report.CreatedDate__c+offset}"/>
                                      </apex:outputText>
                                            <div class="user">
                                                <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                            </div>
                                            <div class="text outputfield_summary">
                                        <apex:outputfield value="{!report.Report_body__c}"/>
                                    </div>
                                        </apex:actionSupport>
                                    </apex:outputPanel>
                                </li>
                            </apex:outputPanel>
                            <!-- Pending -->
                            <apex:outputPanel layout="none" rendered="{!(report.State__c=typePending)}">
                                <li class="result-item pending report-list-item"  reportId="{!report.Name}">
                                    <apex:outputPanel >
                                        <apex:actionSupport event="onclick" action="{!setSelectedUnpublishedReport}" rerender="clickedReport,PendingPanel" oncomplete="previousReportList='Panel7';setView_02_01_10();"> 
                                            <apex:param name="clickedReport" value="{!report.Name}" assignTo="{!selectedReportName}"/>
                                            <div class="category-tag">{!report.Category__c}</div>
                                            <h4 class="title">{!report.Subject__c}</h4> 
                                            <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                        <apex:param value="{!report.CreatedDate__c+offset}"/>
                                      </apex:outputText>
                                            <div class="user">
                                                <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                            </div>
                                            <div class="text outputfield_summary">
                                        <apex:outputfield value="{!report.Report_body__c}"/>
                                    </div>
                                        </apex:actionSupport>
                                    </apex:outputPanel>
                                </li>
                            </apex:outputPanel>
                            <!-- Publish -->
                            <apex:outputPanel layout="none" rendered="{!(report.State__c=typePublish)}">
                                <li class="result-item publish report-list-item" reportId="{!report.Name}">
                                    <apex:outputPanel >
                                        <apex:actionSupport event="onclick" action="{!setSelectedReport}" rerender="clickedReport,PublishPanel" oncomplete="previousReportList='Panel7';setView_02_01_12();"> 
                                            <apex:param name="clickedReport" value="{!report.Name}" assignTo="{!selectedReportName}"/>
                                            <div class="category-tag">{!report.Category__c}</div>
                                            <h4 class="title">{!report.Subject__c}</h4> 
                                            <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                        <apex:param value="{!report.CreatedDate__c+offset}"/>
                                      </apex:outputText>
                                            <div class="user">
                                                <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                            </div>
                                            <div class="text outputfield_summary">
                                        <apex:outputfield value="{!report.Report_body__c}"/>
                                    </div>
                                        </apex:actionSupport>
                                    </apex:outputPanel>
                                </li>
                            </apex:outputPanel>
                            <!-- Remand -->
                            <apex:outputPanel layout="none" rendered="{!(report.State__c=typeRemand)}">
                                <li class="result-item remand report-list-item" reportId="{!report.Name}">
                                    <apex:outputPanel >
                                        <apex:actionSupport event="onclick" action="{!setSelectedUnpublishedReport}" rerender="clickedReport,RemandPanel" oncomplete="previousReportList='Panel7';setView_02_01_13(false);"> 
                                            <apex:param name="clickedReport" value="{!report.Name}" assignTo="{!selectedReportName}"/>
                                            <div class="category-tag">{!report.Category__c}</div>
                                            <h4 class="title">{!report.Subject__c}</h4> 
                                            <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                        <apex:param value="{!report.CreatedDate__c+offset}"/>
                                      </apex:outputText>
                                            <div class="user">
                                                <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                            </div>
                                            <div class="text outputfield_summary">
                                        <apex:outputfield value="{!report.Report_body__c}"/>
                                    </div>
                                        </apex:actionSupport>
                                    </apex:outputPanel>
                                </li>
                            </apex:outputPanel>
                                    
                        </apex:repeat>

                    </ul>

                </div>
                </apex:outputPanel>

        <div class="float-functions">
                        <apex:commandLink value="新規作成" styleClass="btn-create ui-color-1"
                            action="{!initCreatePage}" 
                            reRender="report-create-standard-entry,CreatePanel" 
                            oncomplete="previousReportList='Panel7';setView_02_01_05();"/>
                </div>

                <footer class="report-section-footer"></footer>
            </section>

            <!-- #View 02-01-08(typ.) -->
            <section class="report-section report-section-search-my-entry hide">
                <header class="report-section-header">
                    <h1>レポート</h1>
                    <ul class="{!IF(isApprover,'','cheat')}">
                        <li class="{!IF(isApprover,'','cheat')}">
                          <h2>
                                <apex:commandLink value="公開レポート" action="{!dummyFunction}" rerender="listOfSAReports,HomePanel" oncomplete="setView_02_01_01();"/>
                            </h2>
                        </li>
                        <li class="{!IF(isApprover,'','cheat')}">
                          <h2>
                                <apex:commandLink html-class="current" value="Myレポート" action="{!getAllMyReports}" rerender="listOfSAReports,MyReportsPanel" oncomplete="setView_02_01_07();"/>
                            </h2>
                        </li>
                        <li>
                          <h2>
                            <apex:outputPanel rendered="{!isApprover}">
                              <apex:commandLink value="承認待ち" styleClass="approver-tab" action="{!getPendingReports}" rerender="listOfSAReports,ReportPendingListPanel" oncomplete="setView_02_02_01();"/>
                            </apex:outputPanel>
                          </h2>
                        </li>
                    </ul>
                    <div class="btn-search">
                        <a href="#" class="ui-color-dark" onClick="setBackToListLogic();">戻る</a>
                    </div>
                </header>

                <apex:outputPanel id="MySearchPanel">
                
                <div class="report-search-condition-form">

                    <form>
                            
                            <label class="status">
                                  <apex:selectList id="mySearchSelectState" value="{!mySearchState}" size="1">
                                    <apex:selectOptions value="{!stateDataOptions}"/>
                                  </apex:selectList>
                            </label>
                            <label class="keyword">
                                <apex:inputText value="{!mySearchKeywords}" html-placeholder="キーワード検索"/>
                            </label>
                            
                            <div class="create-date">
                                <label>投稿日</label>
                                <apex:inputText value="{!mySearchDateStart}" styleclass="begin datetimepicker" />
                                <span class="divider">～</span>
                                <apex:inputText value="{!mySearchDateEnd}" styleclass="end datetimepicker" />
                            </div>
                            <div class="count">
                                <label>表示件数</label>
                                    <apex:selectList id="mySearchSelectCount" value="{!mySearchCount}" size="1">
                                      <apex:selectOptions value="{!countDataOptions}"/>
                                  </apex:selectList>
                            </div>
                            
                                <div class="btn btn-search">
                                    <a href="#" class="btn-search ui-color-1" onClick="executeSearchMyReportQuery();" >検索</a>
                                 </div>
                           
                        </form>

                </div>

                </apex:outputPanel>
                
                <footer class="report-section-footer"></footer>
            </section>

            <!-- #View 02-01-09(typ.) -->
            <section class="report-section report-section-search-my-result hide">
                <header class="report-section-header">
                    <h1>レポート</h1>
                    <ul class="{!IF(isApprover,'','cheat')}">
                        <li class="{!IF(isApprover,'','cheat')}">
                          <h2>
                               <apex:commandLink value="公開レポート" action="{!dummyFunction}" rerender="listOfSAReports,HomePanel" oncomplete="setView_02_01_01();"/>
                            </h2>
                        </li>
                        <li class="{!IF(isApprover,'','cheat')}">
                          <h2>
                               <apex:commandLink html-class="current" value="Myレポート" action="{!getAllMyReports}" rerender="listOfSAReports,MyReportsPanel" oncomplete="setView_02_01_07();"/>
                            </h2>
                        </li>
                        <li>
                          <h2>
                            <apex:outputPanel rendered="{!isApprover}">
                              <apex:commandLink value="承認待ち" styleClass="approver-tab" action="{!getPendingReports}" rerender="listOfSAReports,ReportPendingListPanel" oncomplete="setView_02_02_01();"/>
                            </apex:outputPanel>
                          </h2>
                        </li>
                    </ul>
                        <div class="btn-search">
                            <apex:commandLink value="検索" 
                                                action="{!initMySearchPages}" 
                                                reRender="MySearchPanel" 
                                                oncomplete="previousReportList='Panel9';setView_02_01_08();"/>
                        </div>
                </header>

                <apex:outputPanel id="MySearchResultPanel">

                <div class="section-body report-section-body">

                    <div class="report-search-condition">
                        <ul>
                            <li><span class="label">状態</span><span class="value">{!searchStateLabel}</span></li>
                            <li><span class="label">キーワード</span><span class="value">{!latestMySearchKeywords}</span></li>
                            <li><span class="label">投稿日</span><span class="value">{!latestMySearchDateStart}～ {!latestMySearchDateEnd}</span></li>
                            <li><span class="label">表示件数</span><span class="value">{!searchCountLabel}</span></li>
                        </ul>
                        <div class="btn btn-clear">
                            <a href="#" class="ui-color-1">
                                <apex:outputPanel >
                                    <apex:actionSupport event="onclick" action="{!getAllMyReports}" rerender="MyReportsPanel" oncomplete="setView_02_01_07();">
                                        検索クリア
                                    </apex:actionSupport>
                                </apex:outputPanel>
                            </a>
                        </div>
                    </div>

                    <ul>
                        <!-- #DynamicItem -->
                        <apex:repeat value="{!listOfSAReports}" var="report" >

                            <!-- Without New Tag -->
                            <apex:outputPanel layout="none" rendered="{!(report.State__c=typeDraft)}">
                                <li class="result-item draft report-list-item" reportId="{!report.Name}">
                                    <apex:outputPanel >
                                        <apex:actionSupport event="onclick" action="{!setSelectedReport}" rerender="clickedReport,DraftPanel" oncomplete="previousReportList='Panel9';setView_02_01_11(false);"> 
                                            <apex:param name="clickedReport" value="{!report.Name}" assignTo="{!selectedReportName}"/>
                                            <div class="category-tag">{!report.Category__c}</div>
                                            <h4 class="title">{!report.Subject__c}</h4> 
                                            <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                        <apex:param value="{!report.CreatedDate__c+offset}"/>
                                      </apex:outputText>
                                            <div class="user">
                                                <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                            </div>
                                            <div class="text outputfield_summary">
                                        <apex:outputfield value="{!report.Report_body__c}"/>
                                    </div>
                                        </apex:actionSupport>
                                    </apex:outputPanel>
                                </li>
                            </apex:outputPanel>
                            <!-- Without New Tag -->
                            <apex:outputPanel layout="none" rendered="{!(report.State__c=typePending)}">
                                <li class="result-item pending report-list-item" reportId="{!report.Name}">
                                    <apex:outputPanel >
                                        <apex:actionSupport event="onclick" action="{!setSelectedReport}" rerender="clickedReport,PendingPanel" oncomplete="previousReportList='Panel9';setView_02_01_10();"> 
                                            <apex:param name="clickedReport" value="{!report.Name}" assignTo="{!selectedReportName}"/>
                                            <div class="category-tag">{!report.Category__c}</div>
                                            <h4 class="title">{!report.Subject__c}</h4> 
                                            <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                        <apex:param value="{!report.CreatedDate__c+offset}"/>
                                      </apex:outputText>
                                            <div class="user">
                                                <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                            </div>
                                            <div class="text outputfield_summary">
                                        <apex:outputfield value="{!report.Report_body__c}"/>
                                    </div>
                                        </apex:actionSupport>
                                    </apex:outputPanel>
                                </li>
                            </apex:outputPanel>
                            <!-- Without New Tag -->
                            <apex:outputPanel layout="none" rendered="{!(report.State__c=typeRemand)}">
                                <li class="result-item remand report-list-item" reportId="{!report.Name}">
                                    <apex:outputPanel >
                                        <apex:actionSupport event="onclick" action="{!setSelectedReport}" rerender="clickedReport,RemandPanel" oncomplete="previousReportList='Panel9';setView_02_01_13(false);"> 
                                            <apex:param name="clickedReport" value="{!report.Name}" assignTo="{!selectedReportName}"/>
                                            <div class="category-tag">{!report.Category__c}</div>
                                            <h4 class="title">{!report.Subject__c}</h4> 
                                            <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                        <apex:param value="{!report.CreatedDate__c+offset}"/>
                                      </apex:outputText>
                                            <div class="user">
                                                <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                            </div>
                                            <div class="text outputfield_summary">
                                        <apex:outputfield value="{!report.Report_body__c}"/>
                                    </div>
                                        </apex:actionSupport>
                                    </apex:outputPanel>
                                </li>
                            </apex:outputPanel>
                            <!-- Without New Tag -->
                            <apex:outputPanel layout="none" rendered="{!(report.State__c=typePublish)}">
                                <li class="result-item publish report-list-item" reportId="{!report.Name}">
                                    <apex:outputPanel >
                                        <apex:actionSupport event="onclick" action="{!setSelectedReport}" rerender="clickedReport,PublishPanel" oncomplete="previousReportList='Panel9';setView_02_01_12();"> 
                                            <apex:param name="clickedReport" value="{!report.Name}" assignTo="{!selectedReportName}"/>
                                            <div class="category-tag">{!report.Category__c}</div>
                                            <h4 class="title">{!report.Subject__c}</h4> 
                                            <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                        <apex:param value="{!report.CreatedDate__c+offset}"/>
                                      </apex:outputText>
                                            <div class="user">
                                                <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                                            </div>
                                            <div class="text outputfield_summary">
                                        <apex:outputfield value="{!report.Report_body__c}"/>
                                    </div>
                                        </apex:actionSupport>
                                    </apex:outputPanel>
                                </li>
                            </apex:outputPanel>
        
                                
                        </apex:repeat>

                    </ul>

                </div>

                </apex:outputPanel>
                
                <div class="float-functions">
                        <apex:commandLink value="新規作成" styleClass="btn-create ui-color-1"
                            action="{!initCreatePage}" 
                            reRender="report-create-standard-entry,CreatePanel" 
                            oncomplete="previousReportList='Panel9';setView_02_01_05();"/>
                </div>
                <footer class="report-section-footer"></footer>
            </section>

            <!-- #View 02-01-10(typ.) -->
            <section class="report-detail-section report-pending-detail-section hide">
                <header class="report-detail-section-header">
                    <h1>レポート詳細</h1>
                    <div class="btn-back">
                        <a href="#" class="ui-color-dark" onClick="setBackToListLogic();">戻る</a>
                    </div>
                </header>

        <apex:outputPanel id="PendingPanel">

                <div class="section-body report-detail-section-body">


                    <div class="report-detail pending">
                        <!-- #DynamicItem -->
                        <h3 class="title">{!selectedReport.Subject__c}</h3>
                        <div class="attributes">
                            <div class="category">{!selectedReport.Category__c}</div>
                            <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                              <apex:param value="{!selectedReport.CreatedDate__c+offset}"/>
                        </apex:outputText>
                            <div class="process">{!selectedReport.Process__c}</div>
                        </div>
                        <div class="text outputfield_body">
                            <apex:outputfield value="{!selectedReport.Report_body__c}"/>
                        </div>

                        <apex:outputPanel >
                          <p class="text">
                            <apex:repeat value="{!lsAttachments}" var="att" >
                              <ul class="task-list-attachment">
                                <li>
                                  <table style="width: 100%;"><tr><td style="width: 4.7rem; vertical-align: top;">
                                  <apex:outputLink value="{!URLFOR($Action.Attachment.Download, att.Id)}" target="_blank" styleclass="isLink linkstyle">表示</apex:outputLink>
                                </td><td style="vertical-align: top; word-break: break-all;">
                                {!att.Name}
                                </td></tr></table>
                                </li>
                              </ul>
                            </apex:repeat>
                          </p>
                        </apex:outputPanel>

                        <div class="user">
                            <span class="name">{!selectedReport.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                        </div>

                    </div>


                </div>

        </apex:outputPanel>
                <footer class="report-detail-section-footer"></footer>
            </section>

      <!-- #View 02-01-11(typ.) -->
            <!-- Report Detail - Edit Mode -->
            <section class="report-create-section report-draft-create-section hide">
                <header class="report-create-section-header">
                    <h1>レポート編集</h1>
                    <div class="btn-back">
                        <a href="#" class="ui-color-dark" onClick="setBackToListLogic();">戻る</a>
                    </div>
                </header>

                <apex:outputPanel id="DraftPanel">
                
                <div class="section-body report-create-section-body">

                    <div class="report-form draft">

                        <form>

                            <apex:inputText value="{!draftSubject}" styleClass="title" html-placeholder="件名"/>

                            <div class="category">
                                <label>カテゴリ</label>
                                  <apex:selectList id="draftSelectCategory" value="{!draftCategory}" html-defaultvalue="{!draftCategory}"  size="1">
                                    <!-- apex:actionSupport event="onchange" action="{!dummyFunction}" reRender="draftParameters"/> -->
                                    <apex:selectOptions value="{!categoryDataOptions}"/>
                                  </apex:selectList>
                            </div>

                            <div class="process">
                                <label>プロセス</label>
                                  <apex:selectList id="draftSelectProcess" value="{!draftProcess}" html-defaultvalue="{!draftProcess}" size="1">
                                    <!-- apex:actionSupport event="onchange" action="{!dummyFunction}" reRender="draftParameters"/> -->
                                    <apex:selectOptions value="{!processDataOptions}"/>
                                  </apex:selectList>
                            </div>

                            <div class="report-text">
                                <apex:inputTextarea style="height: 14em !important;" value="{!draftBody}" html-placeholder="レポート内容"/>
                            </div>

                            <apex:outputPanel id="DraftPanelAttachments">
                              <p class="text">
                                <apex:repeat value="{!lsAttachments}" var="att" >
                                  <ul class="task-list-attachment">
                                    <li>
                                      <table style="width: 100%;"><tr><td style="width: 4.7rem; vertical-align: top; padding-top: 0.5rem; padding-bottom: 0.5rem;">
                                      <apex:outputLink value="{!URLFOR($Action.Attachment.Download, att.Id)}" target="_blank" styleclass="isLink linkstyle">表示</apex:outputLink>
                                    </td><td style="vertical-align: top; word-break: break-all; padding-top: 0.5rem; padding-bottom: 0.5rem;">
                                    {!att.Name}
                                    </td><td style="width: 12rem; vertical-align: top;">  
                                      <apex:outputPanel >
                                        <a class="button button--delete-list linkstyle" onclick="callDeleteAttachment('{!att.ID}');">削除<i class="icon icon--close"></i></a> 

                                        <a onclick="callPutInTopAttachment('{!att.ID}');" class="isLink linkPutInTop linkstyle button--delete-list-same">先頭へ</a> 
                                      </apex:outputPanel>
                                    </td></tr></table>
                                    </li>
                                  </ul>
                                </apex:repeat>
                              </p>
                            </apex:outputPanel>

                            <ul class="functions">
                                <li class="btn btn-save">
                                    <apex:commandLink value="一時保存"
                                                          html-class="ui-color-1"
                                                          action="{!dummyFunction}"
                                                          rerender="messageError"
                                                          oncomplete="jsCheckSaveValidity();"/> 
                                </li>
                                <li class="btn btn-request">
                                    <apex:commandLink value="投稿承認申請"
                                                  html-class="ui-color-1"
                                                  action="{!dummyFunction}"
                                                  rerender="messageError"
                                                  oncomplete="jsCheckSubmitDraft();"/> 
                               </li>
                            </ul>

                        </form>

                    </div>

                </div>
                </apex:outputPanel>

                <footer class="report-detail-section-footer">
                  <apex:actionRegion id="area51b" renderRegionOnly="false">
                    <apex:outputPanel >
                      <div class="btn btn-attach">
                          <apex:commandLink value="添付"
                                            styleClass="ui-color-3"
                                            action="{!dummyAction}"
                                            reRender="DUMMY" />
                      </div>
                    </apex:outputPanel> 
                  </apex:actionRegion>
                </footer>

            </section>

            <!-- #View 02-01-12(typ.) -->
            <section class="report-detail-section report-publish-detail-section hide">
                <header class="report-detail-section-header">
                    <h1>Myレポート</h1>
                    <div class="btn-back">
                        <a href="#" class="ui-color-dark" onClick="setBackToListLogic();">戻る</a>
                    </div>
                </header>

        <apex:outputPanel id="PublishPanel">
        
                <div class="section-body report-detail-section-body">

          <apex:outputPanel rendered="{!selectedReport.IsNew__c}">
                      <div class="report-detail new publish">
                          <!-- #DynamicItem -->
                          <h3 class="title">{!selectedReport.Subject__c}</h3>
                          <div class="attributes">
                              <div class="category">{!selectedReport.Category__c}</div>
                              <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                <apex:param value="{!selectedReport.CreatedDate__c+offset}"/>
                          </apex:outputText>
                              <div class="process">{!selectedReport.Process__c}</div>
                              <div class="view">
                                  <span class="label">閲覧</span><span class="value">{!selectedReport.NbView__c}</span>
                              </div>
                          </div>
                          <div class="text outputfield_body">
                                <apex:outputfield value="{!selectedReport.Report_body__c}"/>
                            </div>

                          <apex:outputPanel >
                            <p class="text">
                              <apex:repeat value="{!lsAttachments}" var="att" >
                                <ul class="task-list-attachment">
                                  <li>
                                    <table style="width: 100%;"><tr><td style="width: 4.7rem; vertical-align: top;">
                                    <apex:outputLink value="{!URLFOR($Action.Attachment.Download, att.Id)}" target="_blank" styleclass="isLink linkstyle">表示</apex:outputLink>
                                  </td><td style="vertical-align: top; word-break: break-all;">
                                  {!att.Name}
                                  </td></tr></table>
                                  </li>
                                </ul>
                              </apex:repeat>
                            </p>
                          </apex:outputPanel>


                          <div class="user">
                              <span class="name">{!selectedReport.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                          </div>
                          <ul class="engagement">
                            <li class="good">
                        <span class="label">
                                <a href="#" onClick="previousReport='Panel12';setView_02_01_04_02();">
                                    いいね！超いいね！
                                </a>
                                </span>
                              <span class="value">{!selectedReport.NbLike__c}</span>
                              </li>
                            <li class="try">
                              <span class="label">
                              <a href="#" onClick="previousReport='Panel12';setView_02_01_04_01();"> 
                                    マネした数
                              </a>
                            </span>
                          <span class="value">{!selectedReport.NbCopy__c}</span>
                            </li>
                          </ul>
                      </div>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!!selectedReport.IsNew__c}">
                      <div class="report-detail publish">
                          <!-- #DynamicItem -->
                          <h3 class="title">{!selectedReport.Subject__c}</h3>
                          <div class="attributes">
                              <div class="category">{!selectedReport.Category__c}</div>
                              <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                <apex:param value="{!selectedReport.CreatedDate__c+offset}"/>
                          </apex:outputText>
                              <div class="process">{!selectedReport.Process__c}</div>
                              <div class="view">
                                  <span class="label">閲覧</span><span class="value">{!selectedReport.NbView__c}</span>
                              </div>
                          </div>
                          <p class="text">
                              {!selectedReport.Report_body__c}
                          </p>

                          <apex:outputPanel >
                            <p class="text">
                              <apex:repeat value="{!lsAttachments}" var="att" >
                                <ul class="task-list-attachment">
                                  <li>
                                    <table style="width: 100%;"><tr><td style="width: 4.7rem; vertical-align: top;">
                                    <apex:outputLink value="{!URLFOR($Action.Attachment.Download, att.Id)}" target="_blank" styleclass="isLink linkstyle">表示</apex:outputLink>
                                  </td><td style="vertical-align: top; word-break: break-all;">
                                  {!att.Name}
                                  </td></tr></table>
                                  </li>
                                </ul>
                              </apex:repeat>
                            </p>
                          </apex:outputPanel>

                          <div class="user">
                              <span class="name">{!selectedReport.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                          </div>
                          <ul class="engagement">
                            <li class="good">
                        <span class="label">
                                <a href="#" onClick="previousReport='Panel12';setView_02_01_04_02();">
                                    いいね！超いいね！
                                </a>
                                </span>
                              <span class="value">{!selectedReport.NbLike__c}</span>
                              </li>
                            <li class="try">
                              <span class="label">
                              <a href="#" onClick="previousReport='Panel12';setView_02_01_04_01();"> 
                                    マネした数
                              </a>
                            </span>
                          <span class="value">{!selectedReport.NbCopy__c}</span>
                            </li>
                          </ul>
                      </div>
                    </apex:outputPanel>

                    <div class="post-comment">
            <form>
                <apex:inputTextarea style="height: 7em !important;" value="{!newCommentValue2}"/>
                            <apex:outputPanel >
                          <div class="btn btn-post">
                                <apex:commandLink value="投稿" styleclass="ui-color-1" action="{!dummyFunction}" rerender="messageError,PublishPanel" onComplete="jsCheckBodyValidity2();"/>
                            </div>
                          </apex:outputPanel>               
                            <apex:actionFunction name="jsCheckBodyValidity2" action="{!createNewComment2}" rerender="messageError,PublishPanel" oncomplete="jsCheckAddComment();rerenderPublishReportPanel();" />
                      </form>
                  </div>

                    <ul class="comments">
                        <!-- #DynamicItem -->

            <!-- <li class="view" style="margin-bottom: 0.5em">
                            <span class="label" style="font-size: 2.4rem;">コメント : </span><span class="value" style="font-size: 2.4rem;">{!selectedReport.NbComment__c}</span>
                        </li> -->
                        <apex:repeat value="{!reportComments}" var="rComment">
                        <li class="comment">
                            <span class="name">{!rComment.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                            <span class="text">{!rComment.Comment__c}</span>
                            <time>
                              <apex:outputText value="{0,date,yyyy/MM/dd}">
                                  <apex:param value="{!rComment.CreatedDate__c}"/>
                            </apex:outputText> 
                          </time>
                            </li>
                      </apex:repeat>

                    </ul>

                </div>

        </apex:outputPanel>
        
                <footer class="report-detail-section-footer"></footer>
            </section>

            <!-- #View 02-01-13(typ.) -->
            <section class="report-create-section report-remand-create-section hide">
                <header class="report-create-section-header">
                    <h1>レポート編集</h1>
                    <div class="btn-back">
                        <a href="#" class="ui-color-dark" onClick="setBackToListLogic();">戻る</a>
                    </div>
                </header>

        <apex:outputPanel id="RemandPanel">

                <div class="section-body report-create-section-body">

                    <div class="report-form remand">

                        <form>
                            <!-- #DynamicItem -->

              <apex:inputText value="{!remandSubject}" styleClass="title" html-placeholder="件名"/>

                            <div class="category">
                                <label>カテゴリ</label>
                  <apex:selectList id="remandSelectCategory" value="{!remandCategory}" size="1">
                    <apex:selectOptions value="{!categoryDataOptions}"/>
                                  </apex:selectList>
                            </div>

                            <div class="process">
                                <label>プロセス</label>
                                  <apex:selectList id="remandSelectProcess" value="{!remandProcess}" size="1">
                                    <apex:selectOptions value="{!processDataOptions}"/>
                                  </apex:selectList>
                            </div>

                            <div class="report-text">
                                <apex:inputTextarea style="height: 14em !important;" value="{!remandBody}" html-placeholder="レポート内容"/>
                            </div>

                            <apex:outputPanel id="RemandPanelAttachments">
                              <p class="text">
                                <apex:repeat value="{!lsAttachments}" var="att" >
                                  <ul class="task-list-attachment">
                                    <li>
                                      <table style="width: 100%;"><tr><td style="width: 4.7rem; vertical-align: top;">
                                      <apex:outputLink value="{!URLFOR($Action.Attachment.Download, att.Id)}" target="_blank" styleclass="isLink linkstyle">表示</apex:outputLink>
                                    </td><td style="vertical-align: top; word-break: break-all;">
                                    {!att.Name}
                                    </td><td style="width: 14rem; vertical-align: top;">  
                                      <apex:outputPanel >
                                        <a class="button button--delete-list linkstyle" onclick="callDeleteAttachment('{!att.ID}');">削除<i class="icon icon--close"></i></a> 

                                        <a onclick="callPutInTopAttachment('{!att.ID}');" class="isLink linkPutInTop linkstyle button--delete-list-same">先頭へ</a> 
                                      </apex:outputPanel>
                                    </td></tr></table>
                                    </li>
                                  </ul>
                                </apex:repeat>
                              </p>
                            </apex:outputPanel>

                            <ul class="functions">
                                <li class="btn btn-save">
                                  <apex:commandLink value="一時保存"
                                                        html-class="ui-color-1"
                                                        action="{!dummyFunction}"
                                                        rerender="messageError"
                                                        oncomplete="jsCheckSaveRemandValidity();"/> 
                                </li>
                                <li class="btn btn-request">
                                    <apex:commandLink value="投稿承認申請"
                                                  html-class="ui-color-1"
                                                  action="{!dummyFunction}"
                                                    rerender="messageError"
                                                  oncomplete="jsCheckSubmitRemand();"/> 
                                </li>
                            </ul>

                        </form>

                    </div>

                </div>

        </apex:outputPanel>

              <footer class="report-detail-section-footer">
                <apex:actionRegion id="area51c" renderRegionOnly="false">
                  <apex:outputPanel >
                    <div class="btn btn-attach">
                        <apex:commandLink value="添付"
                                          styleClass="ui-color-3"
                                          action="{!dummyAction}"
                                          reRender="DUMMY" />
                    </div>
                  </apex:outputPanel> 
                </apex:actionRegion>
              </footer>

            </section>

      <!-- #View 02-01-14(typ.) -->
      <section class="report-detail-section report-to-validate hide">
            <header class="report-detail-section-header">
                <h1>レポート詳細</h1>
                <div class="btn-back">
                  <a href="#" class="ui-color-dark" onClick="setBackToListLogic();">戻る</a>
                </div>
            </header>

        <apex:outputPanel id="ReportPendingPanel">
        
              <div class="section-body report-detail-section-body">
  
            <div class="report-detail">
            
              <form>
                      <!-- #DynamicItem -->
                        <h3 class="title">{!selectedReport.Subject__c}</h3>
                        <div class="attributes">
                            <div class="category">{!selectedReport.Category__c}</div>
                            <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                    <apex:param value="{!selectedReport.CreatedDate__c+offset}"/>
                              </apex:outputText> 
                            <div class="process">{!selectedReport.Process__c}</div>
                        </div>
                        <div class="text outputfield_body">
                                    <apex:outputfield value="{!selectedReport.Report_body__c}"/>
                                </div>

                          <apex:outputPanel >
                            <p class="text">
                              <apex:repeat value="{!lsAttachments}" var="att" >
                                <ul class="task-list-attachment">
                                  <li>
                                    <table style="width: 100%;"><tr><td style="width: 4.7rem; vertical-align: top;">
                                    <apex:outputLink value="{!URLFOR($Action.Attachment.Download, att.Id)}" target="_blank" styleclass="isLink linkstyle">表示</apex:outputLink>
                                  </td><td style="vertical-align: top; word-break: break-all;">
                                  {!att.Name}
                                  </td></tr></table>
                                  </li>
                                </ul>
                              </apex:repeat>
                            </p>
                          </apex:outputPanel>

                          <div class="user">
                            <span class="name">{!selectedReport.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                          </div>
    
                  <div class="post-comment">
                                      <apex:inputTextarea style="height: 7em !important;" value="{!approveCommentValue}" rows="5"/>
                              </div>
    
                          <ul class="functions" style="width: 100%;">
                            <li class="btn btn-save btnFix">
                                <apex:commandLink value="差し戻し" style="text-indent: 0px;" html-class="ui-color-1" action="{!rejectReport}" rerender="ReportPendingList,ReportPendingResult" oncomplete="setBackToListLogic();"/>
                            </li>
                            <li class="btn btn-request btnFix">
                                <apex:commandLink value="承認" style="text-indent: 0px;" html-class="ui-color-1" action="{!dummyFunction}" rerender="ReportPendingList,ReportPendingResult" oncomplete="jsCheckApproveValidity();"/>
                            </li>
                          </ul>
              </form>
                  </div>
                </div>

        </apex:outputPanel>
        <footer class="report-detail-section-footer"></footer>
    </section>

    <!-- #View 02-02-01(typ.) -->
        <section class="report-section report-pending-list hide">
          <header class="report-section-header">
              <h1>レポート</h1>
              <ul>
                <li>
            <h2>
              <apex:commandLink value="公開レポート" action="{!dummyFunction}" rerender="listOfSAReports,HomePanel" oncomplete="setView_02_01_01();"/>
            </h2>
          </li>
          <li>
            <h2>
              <apex:commandLink value="Myレポート" action="{!getAllMyReports}" rerender="listOfSAReports,MyReportsPanel" oncomplete="setView_02_01_07();"/>
            </h2>
          </li>
                <li>
                  <h2 class="current-approver-tab">
                    <apex:outputPanel rendered="{!isApprover}">
                      <apex:commandLink html-class="current" value="承認待ち" action="{!getPendingReports}" rerender="listOfSAReports,ReportPendingList" oncomplete="setView_02_02_01();"/>
                    </apex:outputPanel>
                  </h2>
                </li>
              </ul>

          <div class="btn-search">
            <apex:commandLink value="検索" action="{!initPendingSearchPages}" reRender="ReportPendingSearchPanel" oncomplete="previousReportList='Panel2-1';setView_02_02_02();"/>
              </div>
              
              
          </header>

      <apex:outputPanel id="ReportPendingListPanel">

            <div class="section-body report-section-body">
  
          <ul>
                  <!-- #DynamicItem -->
  
            <apex:repeat value="{!listOfSAReports}" var="report" >
            
                    <li class="result-item report-list-item" reportId="{!report.Name}">
                  <h4 class="title">{!report.Subject__c}</h4>
                        <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                <apex:param value="{!report.CreatedDate__c+offset}"/>
                          </apex:outputText>
                        <div class="user">
                          <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                        </div>
                        <div class="text outputfield_summary">
                                  <apex:outputfield value="{!report.Report_body__c}"/>
                              </div>
                      </li>

            </apex:repeat>
    
          </ul>


        </div>

      </apex:outputPanel>

      <footer class="report-section-footer"></footer>
      </section>

      <!-- #View 02-02-02(typ.) -->
      <section class="report-section report-pending-search hide">
        <header class="report-section-header">
          <h1>レポート</h1>
          <ul>
            <li>
                            <h2>
                                <apex:commandLink value="公開レポート" action="{!dummyFunction}" rerender="listOfSAReports,HomePanel" oncomplete="setView_02_01_01();"/>
                            </h2>
                        </li>
                        <li>
                            <h2>
                                <apex:commandLink value="Myレポート" action="{!getAllMyReports}" rerender="listOfSAReports,MyReportsPanel" oncomplete="setView_02_01_07();"/>
                            </h2>
                        </li>
            <li>
              <h2 class="current-approver-tab">
                <apex:outputPanel rendered="{!isApprover}">
                  <apex:commandLink html-class="current" value="承認待ち" action="{!getPendingReports}" rerender="listOfSAReports,ReportPendingListPanel" oncomplete="setView_02_02_01();"/>
                </apex:outputPanel>
              </h2>
            </li>
          </ul>
          <div class="btn-search">
                        <a href="#" class="ui-color-dark" onClick="setBackToListLogic();">戻る</a>
                    </div>
            </header>

        <apex:outputPanel id="ReportPendingSearchPanel">

          <div class="report-search-condition-form">
  
            <form>
  
              <label class="keyword">
                <apex:inputText html-placeholder="キーワード検索" value="{!pendingKeywords}" />
              </label>
              <div class="create-date">
                <label>投稿日</label>
                <apex:inputText value="{!pendingDateStart}" styleclass="begin datetimepicker" />
                                <span class="divider">～</span>
                                <apex:inputText value="{!pendingDateEnd}" styleclass="end datetimepicker" />
              </div>
              <div class="count">
                <label>表示件数</label>
                  <apex:selectList id="PendingSearchSelectCount" value="{!pendingCount}" size="1">
                    <apex:selectOptions value="{!countDataOptions}"/>
                                  </apex:selectList>
              </div>
              
                <div class="btn btn-search">
                                    <a href="#" class="btn-search ui-color-1" onClick="executeSearchPendingReportsQuery();">検索</a>
                                 </div>
            
            </form>
  
          </div>
        
        </apex:outputPanel>
        
        <footer class="report-section-footer"></footer>
        
      </section>
      
      <!-- #View 02-02-03(typ.) -->
      <section class="report-section report-pending-result hide">
        <header class="report-section-header">
          <h1>レポート</h1>
          <ul>
            <li>
                            <h2>
                                <apex:commandLink value="公開レポート" action="{!dummyFunction}" rerender="listOfSAReports,HomePanel" oncomplete="setView_02_01_01();"/>
                            </h2>
                        </li>
                        <li>
                            <h2>
                                <apex:commandLink value="Myレポート" action="{!getAllMyReports}" rerender="listOfSAReports,MyReportsPanel" oncomplete="setView_02_01_07();"/>
                            </h2>
                        </li>
            <li>
              <h2 class="current-approver-tab">
                <apex:outputPanel rendered="{!isApprover}">
                  <apex:commandLink html-class="current" value="承認待ち" action="{!getPendingReports}" rerender="listOfSAReports,ReportPendingListPanel" oncomplete="setView_02_02_01();"/>
                </apex:outputPanel>
              </h2>
            </li>
          </ul>
            <div class="btn-search">
              <apex:commandLink value="検索" action="{!initPendingSearchPages}" reRender="ReportPendingSearchPanel" oncomplete="previousReportList='Panel2-3';setView_02_02_02();"/>
                </div>
        </header>

        <apex:outputPanel id="ReportPendingResultPanel">

        <div class="section-body report-section-body">

          <div class="report-search-condition">
            <ul>
              <li><span class="label">キーワード</span><span class="value">{!latestPendingKeywords}</span></li>
                            <li><span class="label">投稿日</span><span class="value">{!latestPendingDateStart}～{!latestPendingDateEnd}</span></li>
                            <li><span class="label">表示件数</span><span class="value">{!searchCountLabel}</span></li>
            </ul>
            <div class="btn btn-clear">
                            <a href="#" class="ui-color-1">
                                <apex:outputPanel >
                                    <apex:actionSupport event="onclick" action="{!getAllMyReports}" rerender="ReportPendingListPanel" oncomplete="setView_02_02_01();">
                                          検索クリア
                                    </apex:actionSupport>
                                </apex:outputPanel>
                            </a>
                        </div>
          </div>

          <ul>
            <!-- #DynamicItem -->
            <apex:repeat value="{!listOfSAReports}" var="report" >
            
              <li class="result-item report-list-item" reportId="{!report.Name}">
                <a href="#">
                  <div class="category-tag">{!report.Category__c}</div>
                  <h4 class="title">{!report.Subject__c}</h4>
                  <apex:outputText styleClass="datetime" value="{0,date,yyyy/MM/dd}">
                                  <apex:param value="{!report.CreatedDate__c+offset}"/>
                            </apex:outputText>
                  <div class="user">
                    <span class="name">{!report.CreatedBy__r.DisplayedUsernameFormula__c}</span>
                  </div>
                  <div class="text outputfield_summary">
                                    <apex:outputfield value="{!report.Report_body__c}"/>
                                </div>
                        </a>
                    </li>
                  
                  </apex:repeat>

          </ul>
  
        </div>

      </apex:outputPanel>
      
      <footer class="report-section-footer"></footer>
    </section>
</apex:actionRegion>


    <section class="report-section-attachment">

      <apex:inputFile id="upload--file"
                      styleclass="attachInput"
                      value="{!newAttachment.body}"
                      filename="{!newAttachment.name}"
                      contentType="{!newAttachment.contentType}" 
                      filesize="{!newAttachmentSize}"
                      onchange="callAddNewAttachmentId();" />

    </section>

        </div>

        <footer class="document-footer"></footer>

        </apex:outputPanel>
    </div>

    <apex:outputPanel >
  </apex:outputPanel>

    <script>
    
        //General Hide and Show function
        function onCommandHideAll() {
            $j(".report-section-home").hide();
            $j(".report-section-search-all-entry").hide();
            $j(".report-section-search-all-result").hide();
            $j(".report-detail-standard-report").hide();
            $j(".report-try-list-section").hide();
            $j(".report-good-list-section").hide();
            $j(".report-create-standard-entry").hide();
            $j(".report-section-my-reports").hide();
            $j(".report-section-search-my-entry").hide();
            $j(".report-section-search-my-result").hide();
            $j(".report-pending-detail-section").hide();
            $j(".report-draft-create-section").hide();
            $j(".report-publish-detail-section").hide();
            $j(".report-remand-create-section").hide();
            $j(".report-to-validate").hide();
            $j(".report-pending-list").hide();
            $j(".report-pending-search").hide();
            $j(".report-pending-result").hide();
        }

        //Main Pages
        function setView_02_01_01() {
            onCommandHideAll();
            $j(".document-header").show();
            $j(".report-section-home").show();
            window.scrollTo(0,0);
            rerenderHomePanel();
        }
        
        function setView_02_01_07() {
            onCommandHideAll();
            $j(".document-header").show();
            $j(".report-section-my-reports").show();
            window.scrollTo(0,0);
            rerenderMyReportPanel();
        }
        
        //Search Pages
        function setView_02_01_02() {
            onCommandHideAll();
            $j(".document-header").show();
            $j(".report-section-search-all-entry").show();
            window.scrollTo(0,0);
            rerenderBasicSearchPanel();
        }

        function setView_02_01_03() {
            onCommandHideAll();
            $j(".document-header").show();
            $j(".report-section-search-all-result").show();
            window.scrollTo(0,0);
            rerenderReportPanel();
        }

        function setView_02_01_08() {
            onCommandHideAll();
            $j(".document-header").show();
            $j(".report-section-search-my-entry").show();
            window.scrollTo(0,0);
            rerenderMySearchPanel();
        }

        function setView_02_01_09() {
            onCommandHideAll();
            $j(".document-header").show();
            $j(".report-section-search-my-result").show();
            window.scrollTo(0,0);
            rerenderMySearchResultPanel();
        }

        //Report Detail Pages
        function setView_02_01_04() {
            onCommandHideAll();
            $j(".document-header").hide();
            $j(".report-detail-standard-report").show();
            window.scrollTo(0,0);
            rerenderReportDetailsPanel();
        }
        
        function setView_02_01_04_noRefresh() {
            onCommandHideAll();
            $j(".document-header").hide();
            $j(".report-detail-standard-report").show();
            window.scrollTo(0,0);
            rerenderReportDetailsPanel();
        }

        function setView_02_01_10() {
            onCommandHideAll();
            $j(".document-header").hide();
            $j(".report-pending-detail-section").show();
            window.scrollTo(0,0);
            rerenderPendingReportPanel();
        }

        function setView_02_01_12() {
            onCommandHideAll();
            $j(".document-header").hide();
            $j(".report-publish-detail-section").show();
            window.scrollTo(0,0);
            rerenderPublishReportPanel();
        }

        //Report Create Pages
        function setView_02_01_05() {
            onCommandHideAll();
            $j(".document-header").hide();
            $j(".report-create-standard-entry").show();
            window.scrollTo(0,0);
            rerenderCreateReportPanel();
        }

        function setView_02_01_11(rerenderForced) {
            onCommandHideAll();
            $j(".document-header").hide();
            $j(".report-draft-create-section").show();

            $j(".btn-attach").off("click");  
            $j(".btn-attach").on("click", function (e) {
            if (!$j(".btn-attach").hasClass('disable')) {
              $j(".attachInput").click();
            }
            });

            window.scrollTo(0,0);

            if (rerenderForced) {
              forceRerenderDraftReportPanel();              
            } else {
              rerenderDraftReportPanel();              
            }
        }
        
        function setView_02_01_11_noRefresh() {
            onCommandHideAll();
            $j(".document-header").hide();
            $j(".report-draft-create-section").show();

            $j(".btn-attach").off("click");  
            $j(".btn-attach").on("click", function (e) {
            if (!$j(".btn-attach").hasClass('disable')) {
              $j(".attachInput").click();
            }
            });

            window.scrollTo(0,0);
        }
        
        function setView_02_01_13(rerenderForced) {
            onCommandHideAll();
            $j(".document-header").hide();
            $j(".report-remand-create-section").show();

            $j(".btn-attach").off("click");  
            $j(".btn-attach").on("click", function (e) {
            if (!$j(".btn-attach").hasClass('disable')) {
              $j(".attachInput").click();
            }
            });

            window.scrollTo(0,0);

            if (rerenderForced) {
              forceRerenderRemandReportPanel();              
            } else {
              rerenderRemandReportPanel();              
            }
        }
        
        function setView_02_01_13_noRefresh() {
            onCommandHideAll();
            $j(".document-header").hide();
            $j(".report-remand-create-section").show();

            $j(".btn-attach").off("click");  
            $j(".btn-attach").on("click", function (e) {
            if (!$j(".btn-attach").hasClass('disable')) {
              $j(".attachInput").click();
            }
            });

            window.scrollTo(0,0);
        }
        //Other Pages
        function setView_02_01_04_02() {
            onCommandHideAll();
            $j(".document-header").hide();
            $j(".report-good-list-section").show();
            window.scrollTo(0,0);
            rerenderGoodViewsPanel();
        }

        function setView_02_01_04_01() {
            onCommandHideAll();
            $j(".document-header").hide();
            $j(".report-try-list-section").show();
            window.scrollTo(0,0);
            rerenderManagedViewsPanel();
        }
        
        function setView_02_01_06() {           
            setView_02_01_07();
        }
        
        function setView_02_01_14() {
            onCommandHideAll();
            $j(".document-header").hide();
            $j(".report-to-validate").show();
            window.scrollTo(0,0);
            rerenderReportPendingPanel();
        }
        
        function setView_02_02_01() {
            onCommandHideAll();
            $j(".document-header").show();
            $j(".report-pending-list").show();
            window.scrollTo(0,0);
            rerenderReportPendingListPanel();
        }
        
        function setView_02_02_02() {
            onCommandHideAll();
            $j(".document-header").show();
            $j(".report-pending-search").show();
            window.scrollTo(0,0);
            rerenderReportPendingSearchPanel();
        }
        
        function setView_02_02_03() {
            onCommandHideAll();
            $j(".document-header").show();
            $j(".report-pending-result").show();
            window.scrollTo(0,0);
            rerenderReportPendingResultPanel();
        }
        
        //Other Functions
        function setBackToListLogic(){
          switch(previousReportList) {
          case 'Panel1':
              callInitHomePage();
              break;
          case 'Panel3':
            latestSearchReport();
              break;
            case 'Panel7':
              callGetAllMyReports();
              break;
            case 'Panel9':
              latestSearchMyReports();
              break;
            case 'Panel2-1':
              callGetPendingReports();
              break;
            case 'Panel2-3':
              latestSearchPendingReports();
              break;
            case 'Home':
              returnToHome();
              break;
          default:
//            alert('レポートホームに戻ります。');
              callInitHomePage();
      }   
        }
        
        function setBackToReportLogic(){
          switch(previousReport) {
          case 'Panel4':
              setView_02_01_04();
              break;
          case 'Panel12':
              setView_02_01_12();
              break;
          default:
            alert('レポートホームに戻ります。');
              setView_02_01_01();
      }   
        }
        
        function executeSearchReportQuery(){
            controllerBasicSearch();
            return null;
        }
        
        function executeSearchPendingReportsQuery(){
            controllerPendingReportsSearch();
            return null;
        }
        
        function executeSearchMyReportQuery(){
            controllerSearchMyReport();
            return null;
        }
                
        /*function ClipBoard(copytextid, holdtextid){
            copyToClipboard(copytextid);
        }*/
        function copyToClipboard(el) {
          
          var oldContentEditable = el.contentEditable,
          oldReadOnly = el.readOnly,
          range = document.createRange();

        el.contenteditable = true;
        el.readonly = false;
        el.style = "display:block;";
        range.selectNodeContents(el);

        var s = window.getSelection();
        s.removeAllRanges();
        s.addRange(range);

        el.setSelectionRange(0, 2000); // A big number, to cover anything that could be inside the element.
        
        document.execCommand('copy');
        
        el.contentEditable = oldContentEditable;
        el.readOnly = oldReadOnly;

        el.style = "display:none;";
          
          /*clipboardData.setData('Text', urlText);
          
          // Create an auxiliary hidden input
          var aux = document.createElement("input");
          // Get the text from the element passed into the input
          aux.setAttribute("value", document.getElementById(elementId).innerHTML);
          // Append the aux input to the body
          document.body.appendChild(aux);
          // Highlight the content
          aux.select();
          // Execute the copy command
          document.execCommand("copy");
          // Remove the input from the body
          document.body.removeChild(aux);*/
          
          alert('URLがクリップボードにコピーされました。');
          
          return true;
        }

        //Init Function
        $j(document).ready(function() {
        if({!reportRendered}){
          if({!sourceOfExecution=='Home'}){
            previousReportList='Panel1';
            setView_02_01_04();
          }else if({!sourceOfExecution=='Email'}){
            previousReportList='Panel1';
            if({!selectedReport.State__c==typePending}){
              if({!isApproverOfSelectedReport==true}){
                setView_02_01_14();
              }else{
                if({!isCreator==true}){
                  setView_02_01_10();
                }else{
                  setView_02_01_01();
                }
              }               
            }else if({!selectedReport.State__c==typePublish}){
              setView_02_01_04();
            }else if({!selectedReport.State__c==typeRemand}){ 
              if({!isApproverOfSelectedReport==true}){
                alert('このレポートはもう否認されました。');
                setView_02_01_01();
              }else{
                if({!isCreator==true}){
                  setView_02_01_13(true);
                }else{
                  setView_02_01_01();
                } 
              }
            }else if({!selectedReport.State__c==typeDraft}){
              if({!isApproverOfSelectedReport==true}){
                alert('このレポートはもう否認されました。');
                setView_02_01_01();
              }else{
                if({!isCreator==true}){
                  setView_02_01_11(true);
                }else{
                  setView_02_01_01();
                }
              }
            }else{
              setView_02_01_01();
            }
          }else if({!sourceOfExecution=='AttachmentRemand'}){

            setView_02_01_13(true);

            if ($j('.messageError').val().length > 0) {
              alert($j('.messageError').val());
              $j('.messageError').val("");
            }

          }else if({!sourceOfExecution=='AttachmentDraft'}){

            setView_02_01_11(true);

            if ($j('.messageError').val().length > 0) {
              alert($j('.messageError').val());
              $j('.messageError').val("");
            }

          }else{
            previousReportList='';
            setView_02_01_04();
          }       
        } else {
          setView_02_01_01();
        }

            // for libraries, flatpickr ********************************
            $j('.datetimepicker').flatpickr({"locale": "ja","dateFormat": "Y/m/d"});      

            // for libraries, trancate ********************************
            /*$j(".truncate").trunk8({
                "fill" : "..."
            });*/

        }); 

        
    </script>
</body>
        </html>

    </apex:form>
</apex:page>